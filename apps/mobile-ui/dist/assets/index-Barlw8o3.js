var Yt=Object.defineProperty,qt=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable;var Ze=(t,e,a)=>e in t?Yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,ue=(t,e)=>{for(var a in e||(e={}))Kt.call(e,a)&&Ze(t,a,e[a]);if(Xe)for(var a of Xe(e))Gt.call(e,a)&&Ze(t,a,e[a]);return t},De=(t,e)=>qt(t,Ut(e));function zt(t,e){for(var a=0;a<e.length;a++){const c=e[a];if(typeof c!="string"&&!Array.isArray(c)){for(const n in c)if(n!=="default"&&!(n in t)){const h=Object.getOwnPropertyDescriptor(c,n);h&&Object.defineProperty(t,n,h.get?h:{enumerable:!0,get:()=>c[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function a(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(n){if(n.ep)return;n.ep=!0;const h=a(n);fetch(n.href,h)}})();var Ee,W,_t,ie,et,Tt,bt,wt,ze,He,Pe,de={},kt=[],Vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Me=Array.isArray;function J(t,e){for(var a in e)t[a]=e[a];return t}function Ve(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Qt(t,e,a){var c,n,h,f={};for(h in e)h=="key"?c=e[h]:h=="ref"?n=e[h]:f[h]=e[h];if(arguments.length>2&&(f.children=arguments.length>3?Ee.call(arguments,2):a),typeof t=="function"&&t.defaultProps!=null)for(h in t.defaultProps)f[h]===void 0&&(f[h]=t.defaultProps[h]);return Se(t,f,c,n,null)}function Se(t,e,a,c,n){var h={type:t,props:e,key:a,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n==null?++_t:n,__i:-1,__u:0};return n==null&&W.vnode!=null&&W.vnode(h),h}function Ie(t){return t.children}function Ae(t,e){this.props=t,this.context=e}function he(t,e){if(e==null)return t.__?he(t.__,t.__i+1):null;for(var a;e<t.__k.length;e++)if((a=t.__k[e])!=null&&a.__e!=null)return a.__e;return typeof t.type=="function"?he(t):null}function Rt(t){var e,a;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((a=t.__k[e])!=null&&a.__e!=null){t.__e=t.__c.base=a.__e;break}return Rt(t)}}function tt(t){(!t.__d&&(t.__d=!0)&&ie.push(t)&&!we.__r++||et!=W.debounceRendering)&&((et=W.debounceRendering)||Tt)(we)}function we(){for(var t,e,a,c,n,h,f,o=1;ie.length;)ie.length>o&&ie.sort(bt),t=ie.shift(),o=ie.length,t.__d&&(a=void 0,c=void 0,n=(c=(e=t).__v).__e,h=[],f=[],e.__P&&((a=J({},c)).__v=c.__v+1,W.vnode&&W.vnode(a),Qe(e.__P,a,c,e.__n,e.__P.namespaceURI,32&c.__u?[n]:null,h,n==null?he(c):n,!!(32&c.__u),f),a.__v=c.__v,a.__.__k[a.__i]=a,It(h,a,f),c.__e=c.__=null,a.__e!=n&&Rt(a)));we.__r=0}function Et(t,e,a,c,n,h,f,o,l,s,u){var r,i,m,p,C,d,S,A=c&&c.__k||kt,b=e.length;for(l=jt(a,e,A,l,b),r=0;r<b;r++)(m=a.__k[r])!=null&&(i=m.__i==-1?de:A[m.__i]||de,m.__i=r,d=Qe(t,m,i,n,h,f,o,l,s,u),p=m.__e,m.ref&&i.ref!=m.ref&&(i.ref&&je(i.ref,null,m),u.push(m.ref,m.__c||p,m)),C==null&&p!=null&&(C=p),(S=!!(4&m.__u))||i.__k===m.__k?l=Mt(m,l,t,S):typeof m.type=="function"&&d!==void 0?l=d:p&&(l=p.nextSibling),m.__u&=-7);return a.__e=C,l}function jt(t,e,a,c,n){var h,f,o,l,s,u=a.length,r=u,i=0;for(t.__k=new Array(n),h=0;h<n;h++)(f=e[h])!=null&&typeof f!="boolean"&&typeof f!="function"?(l=h+i,(f=t.__k[h]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?Se(null,f,null,null,null):Me(f)?Se(Ie,{children:f},null,null,null):f.constructor==null&&f.__b>0?Se(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=t,f.__b=t.__b+1,o=null,(s=f.__i=Jt(f,a,l,r))!=-1&&(r--,(o=a[s])&&(o.__u|=2)),o==null||o.__v==null?(s==-1&&(n>u?i--:n<u&&i++),typeof f.type!="function"&&(f.__u|=4)):s!=l&&(s==l-1?i--:s==l+1?i++:(s>l?i--:i++,f.__u|=4))):t.__k[h]=null;if(r)for(h=0;h<u;h++)(o=a[h])!=null&&!(2&o.__u)&&(o.__e==c&&(c=he(o)),vt(o,o));return c}function Mt(t,e,a,c){var n,h;if(typeof t.type=="function"){for(n=t.__k,h=0;n&&h<n.length;h++)n[h]&&(n[h].__=t,e=Mt(n[h],e,a,c));return e}t.__e!=e&&(c&&(e&&t.type&&!e.parentNode&&(e=he(t)),a.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Jt(t,e,a,c){var n,h,f,o=t.key,l=t.type,s=e[a],u=s!=null&&(2&s.__u)==0;if(s===null&&t.key==null||u&&o==s.key&&l==s.type)return a;if(c>(u?1:0)){for(n=a-1,h=a+1;n>=0||h<e.length;)if((s=e[f=n>=0?n--:h++])!=null&&!(2&s.__u)&&o==s.key&&l==s.type)return f}return-1}function rt(t,e,a){e[0]=="-"?t.setProperty(e,a==null?"":a):t[e]=a==null?"":typeof a!="number"||Vt.test(e)?a:a+"px"}function ye(t,e,a,c,n){var h,f;e:if(e=="style")if(typeof a=="string")t.style.cssText=a;else{if(typeof c=="string"&&(t.style.cssText=c=""),c)for(e in c)a&&e in a||rt(t.style,e,"");if(a)for(e in a)c&&a[e]==c[e]||rt(t.style,e,a[e])}else if(e[0]=="o"&&e[1]=="n")h=e!=(e=e.replace(wt,"$1")),f=e.toLowerCase(),e=f in t||e=="onFocusOut"||e=="onFocusIn"?f.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+h]=a,a?c?a.u=c.u:(a.u=ze,t.addEventListener(e,h?Pe:He,h)):t.removeEventListener(e,h?Pe:He,h);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=a==null?"":a;break e}catch(o){}typeof a=="function"||(a==null||a===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&a==1?"":a))}}function nt(t){return function(e){if(this.l){var a=this.l[e.type+t];if(e.t==null)e.t=ze++;else if(e.t<a.u)return;return a(W.event?W.event(e):e)}}}function Qe(t,e,a,c,n,h,f,o,l,s){var u,r,i,m,p,C,d,S,A,b,g,y,_,w,T,R,E,v=e.type;if(e.constructor!=null)return null;128&a.__u&&(l=!!(32&a.__u),h=[o=e.__e=a.__e]),(u=W.__b)&&u(e);e:if(typeof v=="function")try{if(S=e.props,A="prototype"in v&&v.prototype.render,b=(u=v.contextType)&&c[u.__c],g=u?b?b.props.value:u.__:c,a.__c?d=(r=e.__c=a.__c).__=r.__E:(A?e.__c=r=new v(S,g):(e.__c=r=new Ae(S,g),r.constructor=v,r.render=Zt),b&&b.sub(r),r.props=S,r.state||(r.state={}),r.context=g,r.__n=c,i=r.__d=!0,r.__h=[],r._sb=[]),A&&r.__s==null&&(r.__s=r.state),A&&v.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=J({},r.__s)),J(r.__s,v.getDerivedStateFromProps(S,r.__s))),m=r.props,p=r.state,r.__v=e,i)A&&v.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),A&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(A&&v.getDerivedStateFromProps==null&&S!==m&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(S,g),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(S,r.__s,g)===!1||e.__v==a.__v){for(e.__v!=a.__v&&(r.props=S,r.state=r.__s,r.__d=!1),e.__e=a.__e,e.__k=a.__k,e.__k.some(function(x){x&&(x.__=e)}),y=0;y<r._sb.length;y++)r.__h.push(r._sb[y]);r._sb=[],r.__h.length&&f.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(S,r.__s,g),A&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(m,p,C)})}if(r.context=g,r.props=S,r.__P=t,r.__e=!1,_=W.__r,w=0,A){for(r.state=r.__s,r.__d=!1,_&&_(e),u=r.render(r.props,r.state,r.context),T=0;T<r._sb.length;T++)r.__h.push(r._sb[T]);r._sb=[]}else do r.__d=!1,_&&_(e),u=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++w<25);r.state=r.__s,r.getChildContext!=null&&(c=J(J({},c),r.getChildContext())),A&&!i&&r.getSnapshotBeforeUpdate!=null&&(C=r.getSnapshotBeforeUpdate(m,p)),R=u,u!=null&&u.type===Ie&&u.key==null&&(R=xt(u.props.children)),o=Et(t,Me(R)?R:[R],e,a,c,n,h,f,o,l,s),r.base=e.__e,e.__u&=-161,r.__h.length&&f.push(r),d&&(r.__E=r.__=null)}catch(x){if(e.__v=null,l||h!=null)if(x.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;h[h.indexOf(o)]=null,e.__e=o}else{for(E=h.length;E--;)Ve(h[E]);Fe(e)}else e.__e=a.__e,e.__k=a.__k,x.then||Fe(e);W.__e(x,e,a)}else h==null&&e.__v==a.__v?(e.__k=a.__k,e.__e=a.__e):o=e.__e=Xt(a.__e,e,a,c,n,h,f,l,s);return(u=W.diffed)&&u(e),128&e.__u?void 0:o}function Fe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Fe)}function It(t,e,a){for(var c=0;c<a.length;c++)je(a[c],a[++c],a[++c]);W.__c&&W.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(h){h.call(n)})}catch(h){W.__e(h,n.__v)}})}function xt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Me(t)?t.map(xt):J({},t)}function Xt(t,e,a,c,n,h,f,o,l){var s,u,r,i,m,p,C,d=a.props,S=e.props,A=e.type;if(A=="svg"?n="http://www.w3.org/2000/svg":A=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),h!=null){for(s=0;s<h.length;s++)if((m=h[s])&&"setAttribute"in m==!!A&&(A?m.localName==A:m.nodeType==3)){t=m,h[s]=null;break}}if(t==null){if(A==null)return document.createTextNode(S);t=document.createElementNS(n,A,S.is&&S),o&&(W.__m&&W.__m(e,h),o=!1),h=null}if(A==null)d===S||o&&t.data==S||(t.data=S);else{if(h=h&&Ee.call(t.childNodes),d=a.props||de,!o&&h!=null)for(d={},s=0;s<t.attributes.length;s++)d[(m=t.attributes[s]).name]=m.value;for(s in d)if(m=d[s],s!="children"){if(s=="dangerouslySetInnerHTML")r=m;else if(!(s in S)){if(s=="value"&&"defaultValue"in S||s=="checked"&&"defaultChecked"in S)continue;ye(t,s,null,m,n)}}for(s in S)m=S[s],s=="children"?i=m:s=="dangerouslySetInnerHTML"?u=m:s=="value"?p=m:s=="checked"?C=m:o&&typeof m!="function"||d[s]===m||ye(t,s,m,d[s],n);if(u)o||r&&(u.__html==r.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(r&&(t.innerHTML=""),Et(e.type=="template"?t.content:t,Me(i)?i:[i],e,a,c,A=="foreignObject"?"http://www.w3.org/1999/xhtml":n,h,f,h?h[0]:a.__k&&he(a,0),o,l),h!=null)for(s=h.length;s--;)Ve(h[s]);o||(s="value",A=="progress"&&p==null?t.removeAttribute("value"):p!=null&&(p!==t[s]||A=="progress"&&!p||A=="option"&&p!=d[s])&&ye(t,s,p,d[s],n),s="checked",C!=null&&C!=t[s]&&ye(t,s,C,d[s],n))}return t}function je(t,e,a){try{if(typeof t=="function"){var c=typeof t.__u=="function";c&&t.__u(),c&&e==null||(t.__u=t(e))}else t.current=e}catch(n){W.__e(n,a)}}function vt(t,e,a){var c,n;if(W.unmount&&W.unmount(t),(c=t.ref)&&(c.current&&c.current!=t.__e||je(c,null,e)),(c=t.__c)!=null){if(c.componentWillUnmount)try{c.componentWillUnmount()}catch(h){W.__e(h,e)}c.base=c.__P=null}if(c=t.__k)for(n=0;n<c.length;n++)c[n]&&vt(c[n],e,a||typeof t.type!="function");a||Ve(t.__e),t.__c=t.__=t.__e=void 0}function Zt(t,e,a){return this.constructor(t,a)}function er(t,e,a){var c,n,h,f;e==document&&(e=document.documentElement),W.__&&W.__(t,e),n=(c=!1)?null:e.__k,h=[],f=[],Qe(e,t=e.__k=Qt(Ie,null,[t]),n||de,de,e.namespaceURI,n?null:e.firstChild?Ee.call(e.childNodes):null,h,n?n.__e:e.firstChild,c,f),It(h,t,f)}Ee=kt.slice,W={__e:function(t,e,a,c){for(var n,h,f;e=e.__;)if((n=e.__c)&&!n.__)try{if((h=n.constructor)&&h.getDerivedStateFromError!=null&&(n.setState(h.getDerivedStateFromError(t)),f=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,c||{}),f=n.__d),f)return n.__E=n}catch(o){t=o}throw t}},_t=0,Ae.prototype.setState=function(t,e){var a;a=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=J({},this.state),typeof t=="function"&&(t=t(J({},a),this.props)),t&&J(a,t),t!=null&&this.__v&&(e&&this._sb.push(e),tt(this))},Ae.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),tt(this))},Ae.prototype.render=Ie,ie=[],Tt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bt=function(t,e){return t.__v.__b-e.__v.__b},we.__r=0,wt=/(PointerCapture)$|Capture$/i,ze=0,He=nt(!1),Pe=nt(!0);var tr=0;function I(t,e,a,c,n,h){e||(e={});var f,o,l=e;if("ref"in l)for(o in l={},e)o=="ref"?f=e[o]:l[o]=e[o];var s={type:t,props:l,key:a,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--tr,__i:-1,__u:0,__source:n,__self:h};if(typeof t=="function"&&(f=t.defaultProps))for(o in f)l[o]===void 0&&(l[o]=f[o]);return W.vnode&&W.vnode(s),s}var ge,B,We,at,Oe=0,Dt=[],F=W,st=F.__b,ot=F.__r,it=F.diffed,lt=F.__c,ut=F.unmount,ct=F.__;function Je(t,e){F.__h&&F.__h(B,t,Oe||e),Oe=0;var a=B.__H||(B.__H={__:[],__h:[]});return t>=a.__.length&&a.__.push({}),a.__[t]}function Wt(t){return Oe=1,rr(Ht,t)}function rr(t,e,a){var c=Je(ge++,2);if(c.t=t,!c.__c&&(c.__=[Ht(void 0,e),function(o){var l=c.__N?c.__N[0]:c.__[0],s=c.t(l,o);l!==s&&(c.__N=[s,c.__[1]],c.__c.setState({}))}],c.__c=B,!B.__f)){var n=function(o,l,s){if(!c.__c.__H)return!0;var u=c.__c.__H.__.filter(function(i){return!!i.__c});if(u.every(function(i){return!i.__N}))return!h||h.call(this,o,l,s);var r=c.__c.props!==o;return u.forEach(function(i){if(i.__N){var m=i.__[0];i.__=i.__N,i.__N=void 0,m!==i.__[0]&&(r=!0)}}),h&&h.call(this,o,l,s)||r};B.__f=!0;var h=B.shouldComponentUpdate,f=B.componentWillUpdate;B.componentWillUpdate=function(o,l,s){if(this.__e){var u=h;h=void 0,n(o,l,s),h=u}f&&f.call(this,o,l,s)},B.shouldComponentUpdate=n}return c.__N||c.__}function Lt(t,e){var a=Je(ge++,3);!F.__s&&Bt(a.__H,e)&&(a.__=t,a.u=e,B.__H.__h.push(a))}function ce(t,e){var a=Je(ge++,7);return Bt(a.__H,e)&&(a.__=t(),a.__H=e,a.__h=t),a.__}function nr(){for(var t;t=Dt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(_e),t.__H.__h.forEach(Ne),t.__H.__h=[]}catch(e){t.__H.__h=[],F.__e(e,t.__v)}}F.__b=function(t){B=null,st&&st(t)},F.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ct&&ct(t,e)},F.__r=function(t){ot&&ot(t),ge=0;var e=(B=t.__c).__H;e&&(We===B?(e.__h=[],B.__h=[],e.__.forEach(function(a){a.__N&&(a.__=a.__N),a.u=a.__N=void 0})):(e.__h.forEach(_e),e.__h.forEach(Ne),e.__h=[],ge=0)),We=B},F.diffed=function(t){it&&it(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Dt.push(e)!==1&&at===F.requestAnimationFrame||((at=F.requestAnimationFrame)||ar)(nr)),e.__H.__.forEach(function(a){a.u&&(a.__H=a.u),a.u=void 0})),We=B=null},F.__c=function(t,e){e.some(function(a){try{a.__h.forEach(_e),a.__h=a.__h.filter(function(c){return!c.__||Ne(c)})}catch(c){e.some(function(n){n.__h&&(n.__h=[])}),e=[],F.__e(c,a.__v)}}),lt&&lt(t,e)},F.unmount=function(t){ut&&ut(t);var e,a=t.__c;a&&a.__H&&(a.__H.__.forEach(function(c){try{_e(c)}catch(n){e=n}}),a.__H=void 0,e&&F.__e(e,a.__v))};var mt=typeof requestAnimationFrame=="function";function ar(t){var e,a=function(){clearTimeout(c),mt&&cancelAnimationFrame(e),setTimeout(t)},c=setTimeout(a,35);mt&&(e=requestAnimationFrame(a))}function _e(t){var e=B,a=t.__c;typeof a=="function"&&(t.__c=void 0,a()),B=e}function Ne(t){var e=B;t.__c=t.__(),B=e}function Bt(t,e){return!t||t.length!==e.length||e.some(function(a,c){return a!==t[c]})}function Ht(t,e){return typeof e=="function"?e(t):e}var sr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function or(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xe={};(function(t){(function(e,a){if(typeof t.nodeName!="string")a(t);else{var c={};a(c),e.AnsiUp=c.default}})(sr,function(e){var a=this&&this.__makeTemplateObject||function(o,l){return Object.defineProperty?Object.defineProperty(o,"raw",{value:l}):o.raw=l,o},c;(function(o){o[o.EOS=0]="EOS",o[o.Text=1]="Text",o[o.Incomplete=2]="Incomplete",o[o.ESC=3]="ESC",o[o.Unknown=4]="Unknown",o[o.SGR=5]="SGR",o[o.OSCURL=6]="OSCURL"})(c||(c={}));var n=function(){function o(){this.VERSION="5.2.1",this.setup_palettes(),this._use_classes=!1,this.bold=!1,this.italic=!1,this.underline=!1,this.fg=this.bg=null,this._buffer="",this._url_whitelist={http:1,https:1},this._escape_html=!0}return Object.defineProperty(o.prototype,"use_classes",{get:function(){return this._use_classes},set:function(l){this._use_classes=l},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"url_whitelist",{get:function(){return this._url_whitelist},set:function(l){this._url_whitelist=l},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"escape_html",{get:function(){return this._escape_html},set:function(l){this._escape_html=l},enumerable:!1,configurable:!0}),o.prototype.setup_palettes=function(){var l=this;this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach(function(S){S.forEach(function(A){l.palette_256.push(A)})});for(var s=[0,95,135,175,215,255],u=0;u<6;++u)for(var r=0;r<6;++r)for(var i=0;i<6;++i){var m={rgb:[s[u],s[r],s[i]],class_name:"truecolor"};this.palette_256.push(m)}for(var p=8,C=0;C<24;++C,p+=10){var d={rgb:[p,p,p],class_name:"truecolor"};this.palette_256.push(d)}},o.prototype.escape_txt_for_html=function(l){return this._escape_html?l.replace(/[&<>"']/gm,function(s){if(s==="&")return"&amp;";if(s==="<")return"&lt;";if(s===">")return"&gt;";if(s==='"')return"&quot;";if(s==="'")return"&#x27;"}):l},o.prototype.append_buffer=function(l){var s=this._buffer+l;this._buffer=s},o.prototype.get_next_packet=function(){var l={kind:c.EOS,text:"",url:""},s=this._buffer.length;if(s==0)return l;var u=this._buffer.indexOf("\x1B");if(u==-1)return l.kind=c.Text,l.text=this._buffer,this._buffer="",l;if(u>0)return l.kind=c.Text,l.text=this._buffer.slice(0,u),this._buffer=this._buffer.slice(u),l;if(u==0){if(s<3)return l.kind=c.Incomplete,l;var r=this._buffer.charAt(1);if(r!="["&&r!="]"&&r!="(")return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l;if(r=="["){this._csi_regex||(this._csi_regex=h(a([`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \x1B[                      # CSI
                          ([<-?]?)              # private-mode char
                          ([d;]*)                    # any digits or semicolons
                          ([ -/]?               # an intermediate modifier
                          [@-~])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \x1B[                      # CSI
                          [ -~]*                # anything legal
                          ([\0-:])              # anything illegal
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \\x1b\\[                      # CSI
                          ([\\x3c-\\x3f]?)              # private-mode char
                          ([\\d;]*)                    # any digits or semicolons
                          ([\\x20-\\x2f]?               # an intermediate modifier
                          [\\x40-\\x7e])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \\x1b\\[                      # CSI
                          [\\x20-\\x7e]*                # anything legal
                          ([\\x00-\\x1f:])              # anything illegal
                        )
                    `])));var i=this._buffer.match(this._csi_regex);if(i===null)return l.kind=c.Incomplete,l;if(i[4])return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l;i[1]!=""||i[3]!="m"?l.kind=c.Unknown:l.kind=c.SGR,l.text=i[2];var m=i[0].length;return this._buffer=this._buffer.slice(m),l}else if(r=="]"){if(s<4)return l.kind=c.Incomplete,l;if(this._buffer.charAt(2)!="8"||this._buffer.charAt(3)!=";")return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l;this._osc_st||(this._osc_st=f(a([`
                        (?:                         # legal sequence
                          (\x1B\\)                    # ESC                           |                           # alternate
                          (\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\0-]                 # anything illegal
                          |                           # alternate
                          [\b-]                 # anything illegal
                          |                           # alternate
                          [-]                 # anything illegal
                        )
                    `],[`
                        (?:                         # legal sequence
                          (\\x1b\\\\)                    # ESC \\
                          |                           # alternate
                          (\\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\\x00-\\x06]                 # anything illegal
                          |                           # alternate
                          [\\x08-\\x1a]                 # anything illegal
                          |                           # alternate
                          [\\x1c-\\x1f]                 # anything illegal
                        )
                    `]))),this._osc_st.lastIndex=0;{var p=this._osc_st.exec(this._buffer);if(p===null)return l.kind=c.Incomplete,l;if(p[3])return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l}{var C=this._osc_st.exec(this._buffer);if(C===null)return l.kind=c.Incomplete,l;if(C[3])return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l}this._osc_regex||(this._osc_regex=h(a([`
                        ^                           # beginning of line
                                                    #
                        \x1B]8;                    # OSC Hyperlink
                        [ -:<-~]*       # params (excluding ;)
                        ;                           # end of params
                        ([!-~]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                        ([ -~]+)              # TEXT capture
                        \x1B]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                        \\x1b\\]8;                    # OSC Hyperlink
                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)
                        ;                           # end of params
                        ([\\x21-\\x7e]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                        ([\\x20-\\x7e]+)              # TEXT capture
                        \\x1b\\]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                    `])));var i=this._buffer.match(this._osc_regex);if(i===null)return l.kind=c.ESC,l.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),l;l.kind=c.OSCURL,l.url=i[1],l.text=i[2];var m=i[0].length;return this._buffer=this._buffer.slice(m),l}else if(r=="(")return l.kind=c.Unknown,this._buffer=this._buffer.slice(3),l}},o.prototype.ansi_to_html=function(l){this.append_buffer(l);for(var s=[];;){var u=this.get_next_packet();if(u.kind==c.EOS||u.kind==c.Incomplete)break;u.kind==c.ESC||u.kind==c.Unknown||(u.kind==c.Text?s.push(this.transform_to_html(this.with_state(u))):u.kind==c.SGR?this.process_ansi(u):u.kind==c.OSCURL&&s.push(this.process_hyperlink(u)))}return s.join("")},o.prototype.with_state=function(l){return{bold:this.bold,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:l.text}},o.prototype.process_ansi=function(l){for(var s=l.text.split(";");s.length>0;){var u=s.shift(),r=parseInt(u,10);if(isNaN(r)||r===0)this.fg=this.bg=null,this.bold=!1,this.italic=!1,this.underline=!1;else if(r===1)this.bold=!0;else if(r===3)this.italic=!0;else if(r===4)this.underline=!0;else if(r===22)this.bold=!1;else if(r===23)this.italic=!1;else if(r===24)this.underline=!1;else if(r===39)this.fg=null;else if(r===49)this.bg=null;else if(r>=30&&r<38)this.fg=this.ansi_colors[0][r-30];else if(r>=40&&r<48)this.bg=this.ansi_colors[0][r-40];else if(r>=90&&r<98)this.fg=this.ansi_colors[1][r-90];else if(r>=100&&r<108)this.bg=this.ansi_colors[1][r-100];else if((r===38||r===48)&&s.length>0){var i=r===38,m=s.shift();if(m==="5"&&s.length>0){var p=parseInt(s.shift(),10);p>=0&&p<=255&&(i?this.fg=this.palette_256[p]:this.bg=this.palette_256[p])}if(m==="2"&&s.length>2){var C=parseInt(s.shift(),10),d=parseInt(s.shift(),10),S=parseInt(s.shift(),10);if(C>=0&&C<=255&&d>=0&&d<=255&&S>=0&&S<=255){var A={rgb:[C,d,S],class_name:"truecolor"};i?this.fg=A:this.bg=A}}}}},o.prototype.transform_to_html=function(l){var s=l.text;if(s.length===0||(s=this.escape_txt_for_html(s),!l.bold&&!l.italic&&!l.underline&&l.fg===null&&l.bg===null))return s;var u=[],r=[],i=l.fg,m=l.bg;l.bold&&u.push("font-weight:bold"),l.italic&&u.push("font-style:italic"),l.underline&&u.push("text-decoration:underline"),this._use_classes?(i&&(i.class_name!=="truecolor"?r.push(i.class_name+"-fg"):u.push("color:rgb("+i.rgb.join(",")+")")),m&&(m.class_name!=="truecolor"?r.push(m.class_name+"-bg"):u.push("background-color:rgb("+m.rgb.join(",")+")"))):(i&&u.push("color:rgb("+i.rgb.join(",")+")"),m&&u.push("background-color:rgb("+m.rgb+")"));var p="",C="";return r.length&&(p=' class="'+r.join(" ")+'"'),u.length&&(C=' style="'+u.join(";")+'"'),"<span"+C+p+">"+s+"</span>"},o.prototype.process_hyperlink=function(l){var s=l.url.split(":");if(s.length<1||!this._url_whitelist[s[0]])return"";var u='<a href="'+this.escape_txt_for_html(l.url)+'">'+this.escape_txt_for_html(l.text)+"</a>";return u},o}();function h(o){var l=o.raw[0],s=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,u=l.replace(s,"");return new RegExp(u)}function f(o){var l=o.raw[0],s=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,u=l.replace(s,"");return new RegExp(u,"g")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n})})(xe);const Te=or(xe),ht=zt({__proto__:null,default:Te},[xe]);function V(t){const e=t.match(/^\s*/);return e?e[0].length:0}function k(t){return t?t.toLowerCase().replace(/\s+/g," ").trim():""}function ne(t){const e=/^(?:(\d+)x?\s+)?(.*)/,a=t.trim().match(e);if(a){const c=a[1]?`${a[1]}x`:"1x";let n=a[2].trim();return n=n.replace(/^with\s+/i,"").trim(),{quantity:c,name:n}}return{quantity:"1x",name:t.trim()}}function K(t){return Array.isArray(t)&&t.sort((e,a)=>{const c=parseInt(String(e&&e.quantity||"1x").replace(/x/i,""),10)||1,n=parseInt(String(a&&a.quantity||"1x").replace(/x/i,""),10)||1;if(c!==n)return n-c;const h=e&&e.name?e.name.toString().toLowerCase():"",f=a&&a.name?a.name.toString().toLowerCase():"";return h<f?-1:h>f?1:0}),t}const z={"World Eaters":"Chaos","Chaos Space Marines":"Chaos","Emperor's Children":"Chaos","Death Guard":"Chaos","Chaos Daemons":"Chaos","Chaos Knights":"Chaos","Thousand Sons":"Chaos","Space Marines":"Imperium","Iron Hands":"Space Marines",Salamanders:"Space Marines","Space Wolves":"Space Marines",Ultramarines:"Space Marines","White Scars":"Space Marines","Adepta Sororitas":"Imperium","Astra Militarum":"Imperium","Imperial Fists":"Space Marines","Dark Angels":"Space Marines","Blood Angels":"Space Marines","Raven Guard":"Space Marines","Black Templars":"Space Marines",Deathwatch:"Space Marines","Grey Knights":"Imperium","Imperial Knights":"Imperium","Adeptus Custodes":"Imperium","Adeptus Titanicus":"Imperium","Adeptus Mechanicus":"Imperium","Agents of the Imperium":"Imperium",Aeldari:"Xenos",Drukhari:"Xenos",Ynnari:"Xenos",Harlequins:"Xenos",Necrons:"Xenos",Orks:"Xenos",Tyranids:"Xenos","T'au Empire":"Xenos",Tau:"Xenos","T'au":"Xenos","Genestealer Cults":"Xenos","Leagues of Votann":"Xenos"};function le(t){if(!t)return t;t.SUMMARY=t.SUMMARY||{};const e=t.SUMMARY;e.LIST_TITLE=e.LIST_TITLE||"",e.FACTION_KEYWORD&&(e.FACTION_KEYWORD=String(e.FACTION_KEYWORD).trim()),e.DETACHMENT&&(e.DETACHMENT=String(e.DETACHMENT).replace(/\u00A0/g," ").trim()),e.TOTAL_ARMY_POINTS&&(e.TOTAL_ARMY_POINTS=String(e.TOTAL_ARMY_POINTS).trim());const a=n=>{if(!n)return"";try{return n.toString().normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").replace(/[\u2018\u2019\u201B\u2032]/g,"'").replace(/[^\w\s'\-]/g,"").toLowerCase().trim()}catch(h){return n.toString().toLowerCase().trim()}},c=e.FACTION_KEYWORD||null;if(c){const n=a(c);let h;for(const f of Object.keys(z))if(a(f)===n){h=f;break}if(h){const f=c.toString().replace(/[\u2018\u2019\u201B\u2032]/g,"'").trim();e.DISPLAY_FACTION=`${z[h]} - ${f}`}else e.DISPLAY_FACTION=e.DISPLAY_FACTION||c+(e.DETACHMENT?` - ${e.DETACHMENT}`:"")}else e.DETACHMENT?e.DISPLAY_FACTION=e.DISPLAY_FACTION||e.DETACHMENT:e.DISPLAY_FACTION=e.DISPLAY_FACTION||"";if(!e.FACTION_KEY){if(e.FACTION_KEYWORD)try{e.FACTION_KEY=e.FACTION_KEYWORD.toString().toLowerCase()}catch(n){e.FACTION_KEY=String(e.FACTION_KEYWORD).toLowerCase()}else if(e.DISPLAY_FACTION){const n=(e.DISPLAY_FACTION||"").split(" - ")[0];try{e.FACTION_KEY=n.toString().toLowerCase()}catch(h){e.FACTION_KEY=String(n).toLowerCase()}}}return t}function se(t,e,a,c,n="",h=!1,f="wargear"){if(!t)return;t.items=t.items||[];const o=ne(String(e||"").trim()),l=o.quantity?String(o.quantity):"1x",s=o.name||"",u=k(s);if(h){const i=String(a||""),m=String(n||"");if(k(i)===k(s)||m&&k(m)===k(s))return}const r=t.items.find(i=>k(i.name||"")===u);if(r){const i=parseInt(String(r.quantity||"1x").replace(/x/i,""),10)||0,m=parseInt(String(l||"1x").replace(/x/i,""),10)||0;r.quantity=`${i+m}x`}else{const i=k(s)==="warlord"?"special":f;t.items.push({quantity:l,name:s,items:[],type:i,nameshort:""})}}function ft(t,e){if(!t||!e)return;e.items=e.items||[];const a=t.trim(),c=a.match(/\(([^)]+)\)$/),n=c?` (${c[1]})`:"",h=a.replace(/\s*\([^)]+\)$/,"").trim(),f=k(h);if((e.items||[]).some(r=>r&&r.type==="special"&&k((r.name||"").replace(/^Enhancement:\s*/i,""))===f))return;const s=`E: ${h.split(/\s+/).map(r=>r[0]?r[0].toUpperCase():"").join("")}${n}`.trim(),u={quantity:"1x",name:`Enhancement: ${h}`,nameshort:s,items:[],type:"special"};e.items.push(u)}function ir(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]};if(!Array.isArray(t))return e;const a={},c=[];let n=0;for(;n<t.length;n++){const i=(t[n]||"").trim();if(i){if(i.startsWith("+")||i.startsWith("&")){c.push(i);continue}break}}for(const r of c){if(r.startsWith("&")){const C=r.replace(/^&\s*/,"").match(/^(.*?)\s*\(on\s+(?:(Char\d+):\s*)?(.*)\)$/i);if(C){const d=C[1].trim(),S=(C[3]||"").trim();S&&(a[S]=d)}continue}const m=r.replace(/^\+\s*/,"").match(/^([^:]+):\s*(.*)$/);if(m){const p=m[1].trim().toUpperCase(),C=m[2].trim();if(p==="FACTION KEYWORD"){const d=C.split(" - ");e.SUMMARY.FACTION_KEYWORD=d[d.length-1].trim()}else p==="DETACHMENT"?e.SUMMARY.DETACHMENT=C.replace(/\u00A0/g," "):p==="TOTAL ARMY POINTS"&&(e.SUMMARY.TOTAL_ARMY_POINTS=C)}}if(e.SUMMARY.LIST_TITLE="",e.SUMMARY&&e.SUMMARY.FACTION_KEYWORD){const r=e.SUMMARY.FACTION_KEYWORD,i=Object.keys(z).find(p=>p.toLowerCase()===(r||"").toString().toLowerCase()),m=i?z[i]:null;m?e.SUMMARY.DISPLAY_FACTION=`${m} - ${r}`:e.SUMMARY.DISPLAY_FACTION=r+(e.SUMMARY.DETACHMENT?` - ${e.SUMMARY.DETACHMENT}`:"");try{e.SUMMARY.FACTION_KEY=r.toString().toLowerCase()}catch(p){}}let h=null,f=null;const o=/^(?:(Char\d+):\s*)?(?:(\d+)x?\s+)?(.*?)\s*\((\d+)\s*(?:pts|points)\)(?::\s*(.*))?$/i,l=/^\s*(?:\u2022|\*|-|\u25e6)\s*(.*)$/;for(;n<t.length;n++){const r=t[n]||"",i=r.trim();if(!i)continue;if(/^Enhancement:\s*/i.test(i)){const S=i.replace(/^Enhancement:\s*/i,"").trim();f&&ft(S,f);continue}const m=i.match(o);if(m){const S=m[1],A=m[2]?`${m[2]}x`:"1x",b=(m[3]||"").trim(),g=parseInt(m[4],10)||0,y=m[5],_={quantity:A,name:b,points:g,items:[],isComplex:!1,nameshort:""};S?(e.CHARACTER.push(_),f=_):(e["OTHER DATASHEETS"]=e["OTHER DATASHEETS"]||[],e["OTHER DATASHEETS"].push(_)),h=_,y&&y.split(",").map(w=>w.trim()).filter(Boolean).forEach(w=>se(_,w,_.name,e.SUMMARY.FACTION_KEYWORD||"",_.name,!0));continue}const p=r.match(l);if(p){const S=p[1].trim(),A=S.match(/^(\d+)\s+with\s+(.*)$/i);if(A&&h){const y=parseInt(A[1],10)||1,_=A[2],w=h.items&&h.items.length>0?h.items[h.items.length-1]:h;_.split(",").map(T=>T.trim()).filter(Boolean).forEach(T=>se(w,`${y}x ${T}`,w.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0));continue}const b=S.match(/^(\d+x?)\s+(.*?):\s*(.*)$/i);if(b&&h){const y=b[1],_=b[2].trim(),w=b[3]||"",T={quantity:y,name:_,items:[],type:"subunit"};if(h.items=h.items||[],h.items.push(T),w){const R=w.match(/^(\d+)\s+with\s+(.*)$/i);if(R){const E=parseInt(R[1],10)||1;R[2].split(",").map(x=>x.trim()).filter(Boolean).forEach(x=>se(T,`${E}x ${x}`,T.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0))}else w.split(",").map(E=>E.trim()).filter(Boolean).forEach(E=>se(T,E,T.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0))}continue}const g=S.match(/^(\d+x?)\s+(.*)$/i);if(g&&h){const y={quantity:g[1],name:g[2].trim(),items:[],type:"subunit"};h.items=h.items||[],h.items.push(y);continue}if(h){se(h,S,h.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0);continue}continue}const C=i.match(/^(\d+)\s+with\s+(.*)$/i);if(C&&h){const S=parseInt(C[1],10)||1,A=C[2],b=h.items&&h.items.length>0?h.items[h.items.length-1]:h;A.split(",").map(g=>g.trim()).filter(Boolean).forEach(g=>se(b,`${S}x ${g}`,b.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0));continue}const d=i.match(/^(.*?):\s*(.*)$/);if(d&&h){(d[2]||"").split(",").map(A=>A.trim()).filter(Boolean).forEach(A=>se(h,A,h.name,e.SUMMARY.FACTION_KEYWORD||"",h.name,!0));continue}}const s=[...e.CHARACTER||[],...e["OTHER DATASHEETS"]||[]],u=r=>String(r||"").toLowerCase().replace(/[^a-z0-9 ]/g,"").trim();for(const r of Object.keys(a)){const i=a[r],m=s.find(p=>u(p.name).includes(u(r))||u(`${p.quantity} ${p.name}`).includes(u(r)));m&&ft(i,m)}for(const r of s){r&&Array.isArray(r.items)&&r.items.length>0&&K(r.items);const i=r&&Array.isArray(r.items)?r.items.filter(m=>m&&m.type==="subunit"):[];for(const m of i)m&&Array.isArray(m.items)&&m.items.length>0&&K(m.items)}return le(e),e}function G(t,e,a,c,n="",h=!1,f="wargear"){if(!t)return;t.items=t.items||[];const o=String(e||"").trim();if(/battlesuit support system|homing beacon|marker drone/i.test(o))try{U.push(`processing raw=${o} for target=${t&&t.name}`)}catch(g){}let l=o.split(",").map(g=>g.trim()).filter(Boolean);try{const g=new Set;l=l.filter(y=>{const _=k(me(j(y)));return g.has(_)?!1:(g.add(_),!0)})}catch(g){}try{/stealth shas'vre|stealth battlesuits/i.test((t&&t.name||"")+(n||"")+o)&&U.push(`splitParts target=${t&&t.name} top=${n} parts=${JSON.stringify(l)}`)}catch(g){}if(l.length>1){l.forEach(g=>G(t,g,a,c,n,h,f));return}const s=ne(o),u=s.quantity!==void 0&&s.quantity!==null;let r=u?String(s.quantity):"1x",i=s.name||"";try{i=me(j(i))}catch(g){}const m=/battlesuit support system|homing beacon|marker drone/i;try{const g=i.toLowerCase();if(g.includes("battlesuit support system")||g.includes("homing beacon")||g.includes("marker drone"))try{U.push(`addItemToTarget target=${t&&t.name} raw=${o}`)}catch(y){}}catch(g){}const p=i.match(/^(\d+)x\s+(.*)$/i);if(p){const g=parseInt(p[1],10)||1,y=parseInt(String(r||"1x").replace(/x/i,""),10)||1;r=`${Math.max(1,y*g)}x`,i=p[2]}try{U.push(`PARSE_QTY name=${i} parsedQtyRaw=${String(s.quantity||"")} qtyToken=${r}`)}catch(g){}let C=(g=>isNaN(g)?1:g)(parseInt(String(r||"1x").replace(/x/i,""),10)),d=C;try{if(t&&t.type==="subunit"){const g=parseInt(String(t.quantity||"1x").replace(/[^0-9]/g,""),10)||1;try{U.push(`CALC_EFFECTIVE target=${t&&t.name} parentQty=${g} parsedQty=${C} hasExplicit=${u}`)}catch(y){}d=u?C:g;try{U.push(`EFFECTIVE_QTY target=${t&&t.name} effectiveQty=${d}`)}catch(y){}}}catch(g){}const S=i,A=k(i);if(h){const g=String(a||""),y=String(n||"");if(k(g)===k(i)||y&&k(y)===k(i)){if(m.test(i))try{U.push(`SKIP matched unitname name=${i} ctx=${g} top=${y}`)}catch(_){}return}}const b=t.items.find(g=>k(g.name||"")===A);if(b){const g=parseInt(String(b.quantity||"1x").replace(/x/i,""),10)||0,y=g+d;b.quantity=`${y}x`;try{U.push(`UPDATED existing name=${i} existing=${g} added=${d} new=${y} target=${t&&t.name}`)}catch(_){}}else{const g=k(i)==="warlord"?"special":f;t.items.push({quantity:`${d}x`,name:S,items:[],type:g,nameshort:""});try{U.push(`PUSHED new name=${i} quantity=${d} target=${t&&t.name}`)}catch(y){}}}function j(t){if(!t)return t;const e=t.toLowerCase();return e.includes("shield")&&e.includes("drone")?"Shield Drone":e.includes("marker")&&e.includes("drone")?"Marker Drone":e.includes("marker")&&e.includes("beacon")?"Homing Beacon":t}function me(t){return t&&t.split(/\s+/).map(e=>!e||/[A-Z]/.test(e.slice(1))?e:e[0].toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function pt(t,e){if(!e)return`${t}x`;const a=String(e).trim(),c=a.match(/^(\d+)x\s+(.*)$/i);if(c){const n=parseInt(c[1],10)||1,h=c[2]||"";return`${Math.max(1,t*n)}x ${h}`}return`${t}x ${a}`}function lr(t,e){if(!t||!e)return;e.items=e.items||[];const a=t.trim(),c=a.match(/\(([^)]+)\)$/),n=c?` (${c[1]})`:"",h=a.replace(/\s*\([^)]+\)$/,"").trim(),f=k(h);if((e.items||[]).some(r=>{if(!r||!r.name)return!1;const i=String(r.name||"").replace(/^Enhancement:\s*/i,"").replace(/\s*\([^)]+\)$/,"").trim();return k(i)===f}))return;const s=`E: ${h.split(/\s+/).map(r=>r[0]?r[0].toUpperCase():"").join("")}${n}`.trim(),u={quantity:"1x",name:`Enhancement: ${h}`,nameshort:s,items:[],type:"special"};e.items.push(u)}function ur(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]};if(!Array.isArray(t))return e;const a=[];let c=0;for(;c<t.length;c++){const u=(t[c]||"").trim();if(u){if(u.startsWith("+")){a.push(u);continue}if(!u.startsWith("&"))break}}for(const s of a){const r=s.replace(/^\+\s*/,"").match(/^([^:]+):\s*(.*)$/);if(r){const i=r[1].trim().toUpperCase(),m=r[2].trim();if(i==="FACTION KEYWORD"){const p=m.split(" - ");e.SUMMARY.FACTION_KEYWORD=p[p.length-1].trim()}else i==="DETACHMENT"?e.SUMMARY.DETACHMENT=m.replace(/\u00A0/g," "):i==="TOTAL ARMY POINTS"&&(e.SUMMARY.TOTAL_ARMY_POINTS=m)}}if(e.SUMMARY.LIST_TITLE="",e.SUMMARY&&e.SUMMARY.FACTION_KEYWORD){const s=e.SUMMARY.FACTION_KEYWORD,u=Object.keys(z).find(i=>i.toLowerCase()===(s||"").toString().toLowerCase()),r=u?z[u]:null;r?e.SUMMARY.DISPLAY_FACTION=`${r} - ${s}`:e.SUMMARY.DISPLAY_FACTION=s+(e.SUMMARY.DETACHMENT?` - ${e.SUMMARY.DETACHMENT}`:"");try{e.SUMMARY.FACTION_KEY=s.toString().toLowerCase()}catch(i){}}const n=/^(?:(Char\d+):\s*)?(?:(\d+)x?\s+)?(.*?)\s*\((\d+)\s*(?:pts|points)\)(?::\s*(.*))?$/i,h=/^\s*(?:\u2022|\*|-|\u25e6)\s*(.*)$/;let f=null,o=null;for(;c<t.length;c++){const s=t[c]||"",u=s.trim();if(!u)continue;if(/^Enhancement:\s*/i.test(u)){const C=u.replace(/^Enhancement:\s*/i,"").trim();o&&lr(C,o);continue}const r=u.match(n);if(r){const C=r[1],d=r[2]?`${r[2]}x`:"1x",S=(r[3]||"").trim(),A=parseInt(r[4],10)||0,b=r[5],g={quantity:d,name:S,points:A,items:[],isComplex:!1,nameshort:"",charId:C||null};C?(e.CHARACTER.push(g),o=g):(e["OTHER DATASHEETS"]=e["OTHER DATASHEETS"]||[],e["OTHER DATASHEETS"].push(g)),f=g,b&&b.split(",").map(y=>y.trim()).filter(Boolean).forEach(y=>G(g,y,g.name,e.SUMMARY.FACTION_KEYWORD||"",g.name,!0));continue}const i=s.match(h);if(i){const C=i[1].trim(),d=C.match(/^(\d+)\s+with\s+(.*)$/i);if(d&&f){const b=parseInt(d[1],10)||1,g=d[2],y=f.items&&f.items.length>0?f.items[f.items.length-1]:f;try{U.push(`WITHMATCH unit=${f.name} target=${y&&y.name} n=${b} rest=${g}`)}catch(_){}g.split(",").map(_=>_.trim()).filter(Boolean).forEach(_=>{const T=me(j(_));if(y&&y.type==="subunit"){try{U.push(`WITH->SUB target=${y.name} item=${T} n=${b}`)}catch(R){}G(y,`${b}x ${T}`,y.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)}else{try{U.push(`WITH->UNIT unit=${f.name} item=${T} n=${b}`)}catch(R){}G(y,pt(b,T),y.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)}});continue}const S=C.match(/^(\d+x?)\s+(.*?):\s*(.*)$/i);if(S&&f){const b=S[1],g=S[2].trim(),y=S[3]||"",_={quantity:b,name:g,items:[],type:"subunit",_parent:f};if(f.items=f.items||[],f.items.push(_),y){const w=y.match(/^(\d+)\s+with\s+(.*)$/i);w?w[2].split(",").map(R=>R.trim()).filter(Boolean).forEach(R=>{const E=j(R);G(_,E,_.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)}):y.split(",").map(T=>T.trim()).filter(Boolean).forEach(T=>{const R=j(T);G(_,R,_.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)})}continue}const A=C.match(/^(\d+x?)\s+(.*)$/i);if(A&&f)if(f.charId){const b=A[1],g=A[2].trim();G(f,`${b} ${g}`,f.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0);continue}else{const b={quantity:A[1],name:A[2].trim(),items:[],type:"subunit",_parent:f};f.items=f.items||[],f.items.push(b);continue}if(f){let b=C.split(",").map(y=>y.trim()).filter(Boolean);try{const y=f.items&&f.items.length>0?f.items[f.items.length-1]:null;y&&y.name&&(b=b.map(_=>{const w=_.match(/^(.*)\s*\(([^)]+)\)\s*$/);if(w){const T=w[1].trim();if(k(T)===k(y.name))return T}return _}))}catch(y){}try{const y=new Set;b=b.filter(_=>{const w=k(me(j(_)));return y.has(w)?!1:(y.add(w),!0)})}catch(y){}let g=f;if(f.items&&f.items.length>0){const y=f.items[f.items.length-1];y&&y.type==="subunit"&&(g=y)}b.forEach(y=>{const _=me(j(y));G(g,_,g.name||f.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)});continue}continue}const m=u.match(/^(\d+)\s+with\s+(.*)$/i);if(m&&f){const C=parseInt(m[1],10)||1,d=m[2],S=f.items&&f.items.length>0?f.items[f.items.length-1]:f;d.split(",").map(A=>A.trim()).filter(Boolean).forEach(A=>{const g=me(j(A));S&&S.type==="subunit"?G(S,`${C}x ${g}`,S.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0):G(S,pt(C,g),S.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)});continue}const p=u.match(/^(.*?):\s*(.*)$/);if(p&&f){(p[2]||"").split(",").map(d=>d.trim()).filter(Boolean).forEach(d=>{const S=j(d);G(f,S,f.name,e.SUMMARY.FACTION_KEYWORD||"",f.name,!0)});continue}}const l=[...e.CHARACTER||[],...e["OTHER DATASHEETS"]||[]];for(const s of l){s&&Array.isArray(s.items)&&s.items.length>0&&K(s.items);const u=s&&Array.isArray(s.items)?s.items.filter(r=>r&&r.type==="subunit"):[];for(const r of u)r&&Array.isArray(r.items)&&r.items.length>0&&K(r.items)}le(e);try{e.SUMMARY._parseDebug=(U||[]).slice(0,200)}catch(s){}return e}const U=[];function Ce(t){if(!t)return"";const e=new Set(["of","and","the","in","to","with","for","on","a","an","by","from"]);return String(t).split(/\s+/).map((a,c)=>{if(!a)return"";const n=a.toLowerCase();return c>0&&e.has(n)?n:n[0].toUpperCase()+n.slice(1)}).join(" ")}function fe(t,e,a,c,n="",h=!1,f="wargear",o=1){if(!t)return;t.items=t.items||[];const l=ne(String(e||"").trim()),s=l.quantity?String(l.quantity):"1x",u=l.name||"",r=k(u);if(h){const m=String(a||""),p=String(n||"");if(k(m)===k(u)||p&&k(p)===k(u))return}const i=t.items.find(m=>k(m.name||"")===r);if(i){const m=parseInt(String(i.quantity||"1x").replace(/x/i,""),10)||0,p=parseInt(String(s||"1x").replace(/x/i,""),10)||0;i.quantity=`${m+p}x`}else{const m=k(u)==="warlord"?"special":f;t.items.push({quantity:s,name:u,items:[],type:m,nameshort:""})}}function dt(t,e,a){if(!t||!e)return;e.items=e.items||[];const c=t.trim(),n=c.match(/\(([^)]+)\)$/),h=n?` (${n[1]})`:"",f=c.replace(/\s*\([^)]+\)$/,"").trim(),o=k(f);if((e.items||[]).some(i=>i&&i.type==="special"&&k((i.name||"").replace(/^Enhancement:\s*/i,""))===o))return;const u=`E: ${f.split(/\s+/).map(i=>i[0]?i[0].toUpperCase():"").join("")}${h}`.trim(),r={quantity:"1x",name:`Enhancement: ${f}`,nameshort:u,items:[],type:"special"};e.items.push(r)}function cr(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]},a=/^(CHARACTERS|CHARACTER|BATTLELINE|OTHER DATASHEETS|ALLIED UNITS|DEDICATED TRANSPORTS)$/i,c=t.findIndex(i=>a.test((i||"").trim().toUpperCase()));let h=(c===-1?t.slice(0,0):t.slice(0,c)).map(i=>(i||"").trim()).filter(i=>i&&!i.startsWith("Exported with"));const f=h.findIndex(i=>i&&i.trim()!=="");if(f!==-1){const i=h[f],m=i.match(/^(.*?)\s*\((\s*\d+\s*(?:pts|points)\s*)\)\s*$/i);if(m){e.SUMMARY.LIST_TITLE=m[1].trim();const _=(m[2].match(/(\d+)/)||[])[1]||"";_&&(e.SUMMARY.TOTAL_ARMY_POINTS=`${_}pts`)}else e.SUMMARY.LIST_TITLE=i;const p=[];for(let _=f+1;_<h.length;_++){const w=h[_];w&&p.push(w)}const C=["Combat Patrol","Incursion","Strike Force","Onslaught"],d=_=>{if(!_||!/\(/.test(_))return!1;for(const w of C)if(new RegExp(w,"i").test(_))return!0;return!1},S=new Set(Object.values(z).map(_=>(_||"").toString().toLowerCase())),A=p.filter(_=>!(!_||d(_)||S.has(_.toLowerCase())));let b=null,g=null;const y=Object.keys(z).map(_=>_.toLowerCase());for(const _ of A)y.includes((_||"").toString().toLowerCase())?b=_:g||(g=_);if(!b&&A.length>0&&(b=A[0],g=A.length>1?A[1]:g),b&&(e.SUMMARY.FACTION_KEYWORD=b),g&&(e.SUMMARY.DETACHMENT=g),b){const _=Object.keys(z).find(T=>T.toLowerCase()===b.toLowerCase()),w=_?z[_]:null;w?e.SUMMARY.DISPLAY_FACTION=`${w} - ${b}`:e.SUMMARY.DISPLAY_FACTION=b+(g?` - ${g}`:"");try{e.SUMMARY.FACTION_KEY=b.toString().toLowerCase()}catch(T){}}}const o=c===-1?0:c,l=/^(.*?)\s*\(([\d,\.\s]+)\s*(?:pts|points)\)\s*$/i,s=/^\s*(?:•|\-|\+|◦)\s*(.*)$/;let u=null;for(let i=o;i<t.length;i++){const p=(t[i]||"").trim();if(!p||p.startsWith("Exported with"))continue;if(a.test(p.toUpperCase())){u=/^CHARACTERS?/i.test(p)?"CHARACTER":"OTHER DATASHEETS";continue}const C=p.match(l);if(C){const d=C[1].trim(),S=parseInt(String(C[2]).replace(/[\,\.\s]/g,""),10)||0;let A="1x",b=d;const g=d.match(/^([0-9]+x?)\s+(.*)$/i);g&&(A=g[1].toLowerCase(),b=g[2].trim());const y={quantity:A,name:b,points:S,items:[],isComplex:!1,nameshort:""},_=u==="CHARACTER"?"CHARACTER":"OTHER DATASHEETS";e[_]=e[_]||[],e[_].push(y);const w=[];let T=i+1;for(;T<t.length;){const x=t[T]||"";if(!x.trim()||a.test(x.trim().toUpperCase())||l.test(x.trim())||!/^\s+/.test(x))break;w.push(x),T++}const R=(()=>{for(let x=0;x<w.length;x++){const D=w[x];if(!D.match(s))continue;const M=V(D);for(let L=x+1;L<w.length;L++){const P=w[L];if(!P.trim()||V(P)<=M)break;if(s.test(P))return!0}}return!1})();let E=null,v=0;for(let x=0;x<w.length;x++){const D=w[x],H=D.trim(),M=D.match(s),L=V(D);if(M){const P=M[1].trim(),X=P.match(/^(.*?)\s*\(\+?\s*\d+\s*(?:pts?|points)\)\s*$/i);if(/^Enhancement:/i.test(P)){dt(P.replace(/^Enhancement:\s*/i,"").trim(),y,e.SUMMARY.FACTION_KEYWORD||"");continue}else if(X){dt(P.trim(),y,e.SUMMARY.FACTION_KEYWORD||"");continue}if(R){if(E&&typeof v=="number"&&L>v){fe(E,P,E.name,e.SUMMARY.FACTION_KEYWORD||"",y.name,!1);continue}E=null;const N=P.match(/^(\d+x?)\s+(.*)$/i),Y=N?N[1]:"1x",q=N?N[2].trim():P,$={quantity:Y,name:q,items:[],type:"subunit"};y.items=y.items||[],y.items.push($),E=$,v=L;continue}fe(y,P,y.name,e.SUMMARY.FACTION_KEYWORD||"","wargear",1);continue}if(E&&L>v){fe(E,H,E.name,e.SUMMARY.FACTION_KEYWORD||"","wargear",1);continue}fe(y,H,y.name,e.SUMMARY.FACTION_KEYWORD||"","wargear",1)}i=T-1;continue}}function r(i,m){if(!(!i||typeof i!="object")){if(typeof i.name!="string"&&(i.name=""),typeof i.quantity!="string"&&(i.quantity=i.quantity?String(i.quantity):"1x"),typeof i.type!="string"&&(i.type=i.type||"wargear"),typeof i.nameshort!="string"&&(i.nameshort=i.nameshort||""),Array.isArray(i.items)||(i.items=[]),/^Enhancement:/i.test(i.name)){const p=i.name.replace(/^Enhancement:\s*/i,"").trim();i.type="special",i.nameshort=i.nameshort||(()=>{const C=p.match(/\(([^)]+)\)$/),d=C?` (${C[1]})`:"";return`E: ${p.replace(/\s*\([^)]+\)$/,"").trim().split(/\s+/).map(b=>b[0]?b[0].toUpperCase():"").join("")}${d}`.trim()})(),i.name=`Enhancement: ${Ce(p.replace(/\s*\([^)]+\)$/,"").trim())}`}else i.name=m?i.name:Ce(i.name);k(i.name)==="warlord"&&(i.type="special"),i.items=(i.items||[]).map(p=>{if(!p)return null;if(typeof p=="string"){const C={quantity:"1x",name:p.trim(),items:[],type:/^Enhancement:/i.test(p)?"special":"wargear",nameshort:""};return r(C,i.name),C.name&&(C.name=Ce(C.name)),C}return r(p,i.name),p&&p.name&&(p.name=Ce(p.name)),p}).filter(Boolean)}}for(const i of["CHARACTER","OTHER DATASHEETS"])if(Array.isArray(e[i]))for(const m of e[i]){r(m);const p=(m.items||[]).filter(C=>C&&C.type==="subunit");if(p.length>0)if(p.every(d=>k(d.name||"")===k(m.name||""))){const d=new Map;let S=0;for(const A of p){const b=parseInt(String(A.quantity||"1x").replace(/x/i,""),10)||1;S+=b;for(const g of A.items||[]){const y={items:[]};fe(y,`${g.quantity||"1x"} ${g.name}`,m.name,e.SUMMARY.FACTION_KEYWORD||"",g.type||"wargear",1);for(const _ of y.items){const w=k(_.name||"");if(d.has(w)){const T=d.get(w),R=parseInt(String(T.quantity||"1x").replace(/x/i,""),10)||0,E=parseInt(String(_.quantity||"1x").replace(/x/i,""),10)||0;T.quantity=`${R+E}x`}else d.set(w,_)}}}m.items=Array.from(d.values()),S>0&&(m.quantity=`${S}x`),m.isComplex=!1}else{const d=p.reduce((S,A)=>S+(parseInt(String(A.quantity||"1x").replace(/x/i,""),10)||0),0);d>0&&(m.quantity=`${d}x`),m.isComplex=!0}else m.isComplex=!1;Array.isArray(m.items)&&m.items.length>0&&K(m.items)}return le(e),e}function gt(t){if(!t)return"";const e=new Set(["of","and","the","in","to","with","for","on","a","an","by","from"]);return String(t).split(/\s+/).map((a,c)=>{if(!a)return"";const n=a.toLowerCase();return c>0&&e.has(n)?n:n[0].toUpperCase()+n.slice(1)}).join(" ")}function re(t,e,a,c,n="",h=!1,f="wargear",o=1){if(!t)return;t.items=t.items||[];const l=ne(String(e||"").trim()),s=l.quantity?String(l.quantity):"1x",u=parseInt(String(s||"1x").replace(/[^0-9]/g,""),10)||1,r=`${u*(o||1)}x`;let i=l.name||"";if(!h)try{const C=i.match(/^(.+?)\s*\(([^)]+)\)\s*$/);if(C){const d=C[1].trim(),S=C[2].trim(),A=k(d),b=k(a||""),g=k(n||"");A&&(A===b||A===g||b.startsWith(A+" ")||g.startsWith(A+" ")||A.startsWith(b+" ")||A.startsWith(g+" "))&&(i=S)}}catch(C){}const m=k(i);if(h){const C=String(a||""),d=String(n||""),S=k(i),A=k(C),b=k(d),g=A&&S.startsWith(A+" "),y=b&&S.startsWith(b+" ");if(A&&(S===A||g)||b&&(S===b||y)){const _=i.match(/^(.+?)\s*\(([^)]+)\)\s*$/);if(_){const w=_[1].trim(),T=_[2].trim(),R=k(w);if(R===A||R===b||R.startsWith(A+" ")||R.startsWith(b+" ")){if(t&&t._deferredParenthetical&&k(t._deferredParenthetical)===k(T)||t&&t._deferredParenthetical&&k(t._deferredParenthetical)===k(T)||(t.items||[]).some(v=>k(v.name||"")===k(T)))return;re(t,T,a,c,n,!1,f,u);return}}return}}const p=t.items.find(C=>k(C.name||"")===m);if(p){const C=parseInt(String(p.quantity||"1x").replace(/x/i,""),10)||0,d=parseInt(String(r||"1x").replace(/x/i,""),10)||0;p.quantity=`${C+d}x`}else{const C=k(i)==="warlord"?"special":f;t.items.push({quantity:r,name:i,items:[],type:C,nameshort:""})}}function $e(t,e,a){if(!t||!e)return;e.items=e.items||[];const c=t.trim(),n=c.match(/\(([^)]+)\)$/),h=n?` (${n[1]})`:"",f=c.replace(/\s*\([^)]+\)$/,"").trim(),o=k(f);if((e.items||[]).some(i=>i&&i.type==="special"&&k((i.name||"").replace(/^Enhancement:\s*/i,""))===o))return;const u=`E: ${f.split(/\s+/).map(i=>i[0]?i[0].toUpperCase():"").join("")}${h}`.trim(),r={quantity:"1x",name:`Enhancement: ${f}`,nameshort:u,items:[],type:"special"};e.items.push(r)}function yt(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]},a=/^(CHARACTERS|CHARACTER|BATTLELINE|OTHER DATASHEETS|ALLIED UNITS|DEDICATED TRANSPORTS)$/i,c=/^(.*?)\s*\(([\d,\.\s]+)\s*(?:pts|points)\)\s*(?::\s*(.*))?$/i,n=/^\s*(?:•|\-|\+|◦)\s*(.*)$/;let h=null;for(let o=0;o<t.length;o++){const s=(t[o]||"").trim();if(!s)continue;if(a.test(s.toUpperCase())){h=/^CHARACTERS?/i.test(s)?"CHARACTER":"OTHER DATASHEETS";continue}const u=s.match(c);if(u){const r=u[1].trim(),i=parseInt(String(u[2]).replace(/[\,\.\s]/g,""),10)||0;let m="1x",p=r;const C=r.match(/^([0-9]+x?)\s+(.*)$/i);C&&(m=C[1].toLowerCase(),p=C[2].trim());const d={quantity:m,name:p,points:i,items:[],isComplex:!1,nameshort:""},S=h==="CHARACTER"?"CHARACTER":"OTHER DATASHEETS";e[S]=e[S]||[],e[S].push(d);const A=u[3]||"";A&&A.split(",").map(T=>T.trim()).filter(Boolean).forEach(T=>re(d,T,d.name,e.SUMMARY.FACTION_KEYWORD||"",d.name,!0));const b=[];let g=o+1;for(;g<t.length;){const T=t[g]||"";if(!T.trim()||a.test(T.trim().toUpperCase())||c.test(T.trim())||!/^\s+/.test(T)&&!n.test(T))break;b.push(T),g++}const y=(()=>{for(let T=0;T<b.length;T++){const R=b[T];if(!R.match(n))continue;const v=V(R);for(let x=T+1;x<b.length;x++){const D=b[x];if(!D.trim()||V(D)<=v)break;if(n.test(D))return!0}}return!1})();let _=null,w=0;for(let T=0;T<b.length;T++){const R=b[T],E=R.trim(),v=R.match(n),x=V(R);if(v){const D=v[1].trim(),H=D.match(/^(.*?)\s*\(\+?\s*\d+\s*(?:pts?|points)\)\s*$/i);if(/^Enhancement:/i.test(D)){$e(D.replace(/^Enhancement:\s*/i,"").trim(),d,e.SUMMARY.FACTION_KEYWORD||"");continue}else if(H){$e(D.trim(),d,e.SUMMARY.FACTION_KEYWORD||"");continue}if(y){if(_&&typeof w=="number"&&x>w){const N=D.split(",").map(Y=>Y.trim()).filter(Boolean);for(let Y of N){const q=Y.match(/^(.+?)\s*\(([^)]+)\)\s*$/);if(q){const $=q[1].trim(),Q=q[2].trim();if(k($)===k(_.name)){const Z=N.some(ve=>k(ve)===k(Q)),ee=(_.items||[]).some(ve=>k(ve.name||"")===k(Q));if(Z||ee)continue;const ae=ne(Y),$t=parseInt(String(ae.quantity||"1x").replace(/[^0-9]/g,""),10)||1;re(_,Q,_.name,e.SUMMARY.FACTION_KEYWORD||"",d.name,!1,"wargear",$t);continue}}re(_,Y,_.name,e.SUMMARY.FACTION_KEYWORD||"",d.name,!0)}continue}_=null;const M=D.match(/^(\d+x?)\s+(.*)$/i),L=M?M[1]:"1x";let P=M?M[2].trim():D;try{const N=P.match(/^(.+?)\s*\(([^)]+)\)\s*$/);if(N){const Y=N[1].trim(),q=N[2].trim(),$=k(Y),Q=k(d.name||""),Z=k(unitTopName||d.name||"");if($&&($===Q||Q.startsWith($)||$.startsWith(Q)||Z.startsWith($)||$.startsWith(Z))){P=Y;const ee={quantity:L,name:P,items:[],type:"subunit"};ee._deferredParenthetical=q,ee._deferredParentheticalQty=parseInt(String(L||"1x").replace(/[^0-9]/g,""),10)||1,d.items=d.items||[],d.items.push(ee),_=ee,w=x;continue}}}catch(N){}const X={quantity:L,name:P,items:[],type:"subunit"};d.items=d.items||[],d.items.push(X),_=X,w=x;continue}re(d,D,d.name,e.SUMMARY.FACTION_KEYWORD||"","wargear",1);continue}if(_&&x>w){re(_,E,_.name,e.SUMMARY.FACTION_KEYWORD||"",d.name,!0);continue}re(d,E,d.name,e.SUMMARY.FACTION_KEYWORD||"","wargear",1)}o=g-1;continue}}function f(o,l){if(!(!o||typeof o!="object")){if(typeof o.name!="string"&&(o.name=""),typeof o.quantity!="string"&&(o.quantity=o.quantity?String(o.quantity):"1x"),typeof o.type!="string"&&(o.type=o.type||"wargear"),typeof o.nameshort!="string"&&(o.nameshort=o.nameshort||""),Array.isArray(o.items)||(o.items=[]),/^Enhancement:/i.test(o.name)){const s=o.name.replace(/^Enhancement:\s*/i,"").trim();o.type="special",o.nameshort=o.nameshort||(()=>{const u=s.match(/\(([^)]+)\)$/),r=u?` (${u[1]})`:"";return`E: ${s.replace(/\s*\([^)]+\)$/,"").trim().split(/\s+/).map(p=>p[0]?p[0].toUpperCase():"").join("")}${r}`.trim()})(),o.name=`Enhancement: ${gt(s.replace(/\s*\([^)]+\)$/,"").trim())}`}else o.name=l?o.name:gt(o.name);k(o.name)==="warlord"&&(o.type="special"),o.items=(o.items||[]).map(s=>{if(!s)return null;if(typeof s=="string"){const u={quantity:"1x",name:s.trim(),items:[],type:/^Enhancement:/i.test(s)?"special":"wargear",nameshort:""};return f(u,o.name),u}return f(s,o.name),s}).filter(Boolean)}}for(const o of["CHARACTER","OTHER DATASHEETS"])if(Array.isArray(e[o]))for(const l of e[o]){f(l);const s=(l.items||[]).filter(r=>r&&r.type==="subunit");if(s.length>0)if(s.every(i=>k(i.name||"")===k(l.name||""))){const i=new Map;let m=0;for(const p of s){const C=parseInt(String(p.quantity||"1x").replace(/x/i,""),10)||1;m+=C;for(const d of p.items||[]){const S={items:[]};re(S,`${d.quantity||"1x"} ${d.name}`,l.name,e.SUMMARY.FACTION_KEYWORD||"",d.type||"wargear",1);for(const A of S.items){const b=k(A.name||"");if(i.has(b)){const g=i.get(b),y=parseInt(String(g.quantity||"1x").replace(/x/i,""),10)||0,_=parseInt(String(A.quantity||"1x").replace(/x/i,""),10)||0;g.quantity=`${y+_}x`}else i.set(b,A)}}}l.items=Array.from(i.values()),m>0&&(l.quantity=`${m}x`),l.isComplex=!1}else{const i=s.reduce((m,p)=>m+(parseInt(String(p.quantity||"1x").replace(/x/i,""),10)||0),0);i>0&&(l.quantity=`${i}x`),l.isComplex=!1}else l.isComplex=!1;if(Array.isArray(l.items)&&l.items.length===1&&l.items[0]&&l.items[0].type==="subunit"){const r=l.items[0];Array.isArray(r.items)&&r.items.length>0&&(l.items=r.items.slice(),l.isComplex=!1)}Array.isArray(l.items)&&l.items.length>0&&K(l.items);const u=(l.items||[]).filter(r=>r&&r.type==="subunit");for(const r of u)Array.isArray(r.items)&&r.items.length>0&&K(r.items)}return le(e),e}function mr(t){if(!Array.isArray(t))return yt(t);const e=[];let a=0;for(;a<t.length;a++){const r=String(t[a]||"").trim();if(!r){e.push(r);continue}if(r.startsWith("+")||r.startsWith("&")){e.push(r);continue}break}const c=[],n={};for(const u of e){if(!u)continue;if(u.startsWith("&")){const p=u.replace(/^&\s*/,"").match(/^(.*?)\s*\(on\s+(?:(Char\d+):\s*)?(.*)\)$/i);p&&c.push({enh:p[1].trim(),target:(p[3]||"").trim(),charId:p[2]||null});continue}const i=u.replace(/^\+\s*/,"").match(/^([^:]+):\s*(.*)$/);if(i){const m=i[1].trim().toUpperCase(),p=i[2].trim();if(m==="ENHANCEMENT"){const C=p.match(/^(.*?)\s*\(on\s+(?:(Char\d+):\s*)?(.*)\)$/i);C?c.push({enh:C[1].trim(),target:(C[3]||"").trim(),charId:C[2]||null}):c.push({enh:p,target:null,charId:null})}else if(m==="FACTION KEYWORD"){const C=p.split(" - ");n.faction=C[C.length-1].trim()}else m==="DETACHMENT"?n.detachment=p.replace(/\u00A0/g," "):m==="TOTAL ARMY POINTS"&&(n.points=p)}}const h=t.slice(a),f=[];for(const u of h){if(!u){f.push(u);continue}let r=String(u);r=r.replace(/^\s*Char\d+:\s*/i,"");const i=r.match(/^(.*\))\s*:\s*(.+)$/);i?(f.push(i[1]),f.push("  • "+i[2])):f.push(r)}const o=yt(f);o.SUMMARY=o.SUMMARY||{},n.faction&&(o.SUMMARY.FACTION_KEYWORD=n.faction),n.detachment&&(o.SUMMARY.DETACHMENT=n.detachment),n.points&&(o.SUMMARY.TOTAL_ARMY_POINTS=n.points);const l=[...o.CHARACTER||[],...o["OTHER DATASHEETS"]||[]],s=u=>{const r=k(String(u||""));for(const i of l){const m=i&&Array.isArray(i.items)?i.items:[];for(const p of m){if(!p||!p.name)continue;const C=String(p.name||"").replace(/^Enhancement:\s*/i,"").replace(/\s*\([^)]*\)\s*$/,"").trim();if(k(C)===r)return!0}}return!1};for(const u of c){if(!u||!u.enh||s(u.enh))continue;let r=null;const i=m=>String(m||"").toLowerCase().replace(/[^a-z0-9 ]/g,"").trim();if(u.charId){const m=parseInt(String(u.charId).replace(/[^0-9]/g,""),10);!Number.isNaN(m)&&m>0&&Array.isArray(o.CHARACTER)&&o.CHARACTER[m-1]&&(r=o.CHARACTER[m-1])}!r&&u.target&&(r=l.find(m=>i(m.name).includes(i(u.target))||i(`${m.quantity} ${m.name}`).includes(i(u.target)))),!r&&l.length===1&&(r=l[0]),r&&$e(u.enh,r,o.SUMMARY.FACTION_KEYWORD||"")}try{for(const u of["CHARACTER","OTHER DATASHEETS"]){const r=o[u];if(Array.isArray(r))for(const i of r)i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"type")&&delete i.type}for(const u of["CHARACTER","OTHER DATASHEETS"]){const r=o[u];if(Array.isArray(r)){for(const i of r)if(!(!i||!Array.isArray(i.items))){for(const m of i.items.filter(p=>p&&p.type==="subunit"))if(m&&m._deferredParenthetical)try{delete m._deferredParenthetical,delete m._deferredParentheticalQty}catch(p){}}}}}catch(u){}return le(o),o}function hr(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]};if(!Array.isArray(t))return e;const a=t.map(s=>String(s||"")).find(s=>s.trim()),c=t.findIndex(s=>String(s||"").trim());if(a){const s=a.split(/\s*-\s*/).map(u=>u.trim()).filter(Boolean);if(e.SUMMARY.FACTION_FAMILY=s[0]||"",e.SUMMARY.FACTION_KEYWORD=s[1]||"",s.length>=3){const r=s[s.length-1].match(/\[\s*(\d{2,5})\s*pts?\s*\]$/i);r?(e.SUMMARY.TOTAL_ARMY_POINTS=`${r[1]}pts`,s.length===3?e.SUMMARY.LIST_TITLE=s[2]:e.SUMMARY.LIST_TITLE=s.slice(2,s.length-1).join(" - ")):e.SUMMARY.LIST_TITLE=s.slice(2).join(" - ")}e.SUMMARY.DISPLAY_FACTION=a.trim()}for(let s=0;s<Math.min(t.length,40);s++){const u=String(t[s]||"").trim();if(!u)continue;const r=u.match(/^Detachment:\s*(.*)$/i);r&&(e.SUMMARY.DETACHMENT=r[1].trim());const i=u.match(/^TOTAL ARMY POINTS:\s*(.*)$/i);i&&(e.SUMMARY.TOTAL_ARMY_POINTS=i[1].trim());const m=u.match(/^FACTION KEYWORD:\s*(.*)$/i);m&&(e.SUMMARY.FACTION_KEYWORD=m[1].trim());const p=u.match(/^Battle Size:\s*(.*)$/i);p&&(e.SUMMARY.BATTLE_SIZE=p[1].trim());const C=u.match(/^#+\s*(?:\+{1,2}\s*)?(.*)\[\s*\d{2,5}\s*pts?\s*\]$/i);if(C&&!e.SUMMARY.LIST_TITLE){const d=C[1].trim();/Army\s+Roster/i.test(d)||/\+\+/.test(d)?e.SUMMARY.LIST_TITLE="":e.SUMMARY.LIST_TITLE=d}}if(!e.SUMMARY.FACTION_KEYWORD&&e.SUMMARY.DISPLAY_FACTION){const s=e.SUMMARY.DISPLAY_FACTION.split(" - ");s.length>=2?e.SUMMARY.FACTION_KEYWORD=s[1].trim():e.SUMMARY.FACTION_KEYWORD=e.SUMMARY.DISPLAY_FACTION.replace(/\s*\[.*$/,"").trim()}const n=/^(?:(\d+)x?\s+)?(.+?)\s*\[\s*(\d{1,4})\s*pts?\s*\]\s*(?::\s*(.*))?$/i,h=/^\s*(?:•|\-|\+)\s*(.*)$/;let f=null,o=null;for(let s=0;s<t.length;s++){const u=String(t[s]||""),r=u.trim();if(!r||s===c)continue;if(r.startsWith("#")){const p=r.match(/^#+\s*(.+?)\s*(?:\[\s*\d+\s*pts?\s*\])?$/i);if(p){const C=p[1].trim();/character|epic|hero|hq/i.test(C)?f="CHARACTER":f="OTHER DATASHEETS"}continue}const i=r.match(n);if(i){const p=i[1]?`${i[1]}x`:"1x",C=(i[2]||"").trim(),d=parseInt(i[3],10)||0,S=i[4]||"",A={quantity:p,name:C,points:d,items:[],isComplex:!1,nameshort:""};f||(f="OTHER DATASHEETS"),e[f]=e[f]||[],e[f].push(A),o=A,S&&S.split(",").map(b=>b.trim()).filter(Boolean).forEach(b=>{l(o,b,o.name,e.SUMMARY.FACTION_KEYWORD||"",o.name,!0)});continue}const m=u.match(h);if(m&&o){const p=m[1].trim(),C=p.match(/^(\d+)\s+with\s+(.*)$/i);if(C&&o){const A=parseInt(C[1],10)||1,b=C[2],g=o.items&&o.items.length>0?o.items[o.items.length-1]:o;b.split(",").map(y=>y.trim()).filter(Boolean).forEach(y=>l(g,`${A}x ${y}`,g.name,e.SUMMARY.FACTION_KEYWORD||"",o.name,!0));continue}const d=p.match(/^(\d+x?)\s+([^:]+):\s*(.*)$/i);if(d){const A=d[1];let b=d[2].trim();const g=d[3]||"";b=b.replace(/\s+w\/.*$/i,"").trim();const y={quantity:A,name:b,items:[],type:"subunit"};if(g){const _=g.match(/^(\d+)\s+with\s+(.*)$/i);if(_){const w=parseInt(_[1],10)||1;_[2].split(",").map(R=>R.trim()).filter(Boolean).forEach(R=>l(y,`${w}x ${R}`,y.name,e.SUMMARY.FACTION_KEYWORD||"",o.name,!0))}else g.split(",").map(w=>w.trim()).filter(Boolean).forEach(w=>l(y,w,y.name,e.SUMMARY.FACTION_KEYWORD||"",o.name,!0))}o.items=o.items||[],o.items.push(y);continue}const S=p.match(/^(\d+x?)\s+(.*)$/i);if(S&&o){let A=S[2].trim();A=A.replace(/\s+w\/.*$/i,"").trim();const b={quantity:S[1],name:A,items:[],type:"subunit"};o.items=o.items||[],o.items.push(b);continue}l(o,p,o.name,e.SUMMARY.FACTION_KEYWORD||"",o.name,!0);continue}}function l(s,u,r,i,m="",p=!1,C="wargear"){if(!s)return;s.items=s.items||[];const d=String(u||"").trim(),S=ne(d),A=S.quantity?String(S.quantity):"1x",b=/^\s*\d+x?\s+/i.test(d);let g=S.name||"";const y=g.match(/^(.*?)\s*\(([^)]+)\)$/);if(y){const E=(y[1]||"").trim(),v=(y[2]||"").trim();(/\bDrone\b/i.test(E)||/\bDrone\b/i.test(g))&&(g=v)}const _=k(g);if(p){const E=String(r||""),v=String(m||"");if(k(E)===k(g)||v&&k(v)===k(g))return}const w=parseInt(String(A||"1x").replace(/x/i,""),10)||1;let T=w;if(s&&s.type==="subunit"){const E=parseInt(String(s.quantity||"1x").replace(/[^0-9]/g,""),10)||1;T=b?w:E}const R=s.items.find(E=>k(E.name||"")===_);if(R){const E=parseInt(String(R.quantity||"1x").replace(/x/i,""),10)||0;R.quantity=`${E+T}x`}else{const E=k(g)==="warlord"?"special":C;s.items.push({quantity:`${T}x`,name:g,items:[],type:E,nameshort:""})}}for(const s of["CHARACTER","OTHER DATASHEETS"])if(Array.isArray(e[s]))for(const u of e[s]){if(!u||!Array.isArray(u.items)||u.items.length===0)continue;if(u.items.filter(m=>m&&m.type==="subunit").length>1){const m=new Map,p=[];for(const C of u.items){if(!C||C.type!=="subunit"){p.push(C);continue}const d=k(C.name||"");if(!m.has(d))m.set(d,{quantity:C.quantity||"1x",name:C.name,items:Array.isArray(C.items)?C.items.slice():[],type:"subunit"});else{const S=m.get(d),A=parseInt(String(S.quantity||"1x").replace(/[^0-9]/g,""),10)||0,b=parseInt(String(C.quantity||"1x").replace(/[^0-9]/g,""),10)||0;S.quantity=`${A+b}x`;const g=new Map;for(const y of S.items||[]){const _=k(y&&y.name||"");_&&g.set(_,{quantity:y.quantity||"1x",name:y.name,items:[],type:y.type||"wargear",nameshort:y.nameshort||""})}for(const y of C.items||[]){const _=k(y&&y.name||"");if(_)if(g.has(_)){const w=g.get(_),T=parseInt(String(w.quantity||"1x").replace(/[^0-9]/g,""),10)||0,R=parseInt(String(y.quantity||"1x").replace(/[^0-9]/g,""),10)||0;w.quantity=`${T+R}x`}else g.set(_,{quantity:y.quantity||"1x",name:y.name,items:[],type:y.type||"wargear",nameshort:y.nameshort||""})}S.items=Array.from(g.values())}}u.items=[...p,...Array.from(m.values())]}u&&Array.isArray(u.items)&&u.items.length>0&&K(u.items);const i=u&&Array.isArray(u.items)?u.items.filter(m=>m&&m.type==="subunit"):[];for(const m of i)m&&Array.isArray(m.items)&&m.items.length>0&&K(m.items)}return le(e),e}function fr(t,e=40){return(Array.isArray(t)?t:String(t||"").split(/\r?\n/)).slice(0,e)}function pr(t){const e=Array.isArray(t)?t:String(t||"").split(/\r?\n/),a=fr(e,40),c=e.join(`
`),n={NRNR:{score:0,breakdown:{},maxScore:8},"WTC-Compact":{score:0,breakdown:{},maxScore:8},WTC:{score:0,breakdown:{},maxScore:8},GWAPP:{score:0,breakdown:{},maxScore:7},"NR-GW":{score:0,breakdown:{},maxScore:7},LF:{score:0,breakdown:{},maxScore:7}},h=a.some(M=>/-\s*\[\s*\d{2,5}\s*pts?\s*\]$/i.test(M)),f=a.some(M=>/^#{1,3}\s+/.test(M)),o=a.some(M=>/^\s*#?\s*\+\+\s*Army Roster\s*\+\+/i.test(M)),l=a.some(M=>/^\s*##\s+/.test(M)),s=/(.+?)\s*[\(\[]\s*([0-9]{1,4})\s*(?:pts|points)\s*[\)\]]/i,u=c.match(new RegExp(s.source,"g"))||[],r=c.match(/^[ \t]*(?:•|\-|\+)\s*(?:\d+x?)\s+[^:]+:/gmi)||[],i=c.match(/\b[A-Za-z0-9\-\'’ ]+\s*\([^\)]+\)/g)||[],m=/(^|\n)\s*Char\d+:.*\(\s*\d{1,4}\s*(?:pts|points)\s*\)\s*:\s*/i,p=(c.match(new RegExp(m.source,"gi"))||[]).length,C=a.some(M=>/^(List Name|Factions Used|Army Points|Detachment Rule):/i.test(M.trim())),d=a.some(M=>/-\s*\(\s*\d+\s*Points?\s*\)\s*$/i.test(M)),S=c.match(/^(Epic Hero|Epic Heroes|Character|Characters|Battleline|Infantry|Beast|Vehicle|Dedicated Transport|Other Datasheets):\s*$/gmi)||[],A=(c.match(/^\s*•\s*(?:E:|Enhancement:)/gmi)||[]).length,b=(c.match(/^\s*•\s+/gmi)||[]).length;C&&(n.LF.score+=4,n.LF.breakdown.headerKeys=4),d&&(n.LF.score+=4,n.LF.breakdown.titleLine=4),S.length>=2&&(n.LF.score+=3,n.LF.breakdown.sectionColons=S.length),b>5&&(n.LF.score+=1,n.LF.breakdown.bullets=b),A>0&&(n.LF.score+=1,n.LF.breakdown.enhancementLines=A),(C||d||S.length>=2)&&(n.NRNR.score-=1,n.WTC.score-=1,n["WTC-Compact"].score-=1,n.GWAPP.score-=1,n["NR-GW"].score-=3),h&&(n.NRNR.score+=2,n.NRNR.breakdown.titleWithBracketedPts=2),f&&(n.NRNR.score+=3,n.NRNR.breakdown.markdownHeading=3),o&&(n.NRNR.score+=2,n.NRNR.breakdown.armyRoster=2),l&&(n.NRNR.score+=1,n.NRNR.breakdown.doubleHashSections=1),u.length>=3&&(n.NRNR.score+=1,n.NRNR.breakdown.unitLines=1),r.length>0&&(n.NRNR.score+=1,n.NRNR.breakdown.bulletWithQty=r.length),i.length>0&&(n.NRNR.score+=.5,n.NRNR.breakdown.parenItem=i.length);const g=a.join(`
`);/^[ \t]*[+&]/m.test(g)&&(n["WTC-Compact"].score+=3,n["WTC-Compact"].breakdown.headerPlusAmp=3),/(FACTION KEYWORD|DETACHMENT|TOTAL ARMY POINTS)/i.test(g)&&(n["WTC-Compact"].score+=2,n["WTC-Compact"].breakdown.headerKeys=2),u.length>=2&&(n["WTC-Compact"].score+=1,n["WTC-Compact"].breakdown.unitLines=1),p>0&&(n["WTC-Compact"].score+=5,n["WTC-Compact"].breakdown.inlineCharList=p),/^\s*[+&]/m.test(g)&&(n.WTC.score+=1,n.WTC.breakdown.headerPlusAmp=1),/NUMBER OF UNITS:/i.test(g)&&(n.WTC.score+=2,n.WTC.breakdown.numberOfUnits=2);const y=(c.match(/(^|\n)\s*Char\d+:/gi)||[]).length>0;y&&(n.WTC.score+=3,n.WTC.breakdown.charMarkers=3),(f||o||l)&&(n.WTC.score-=2,n.WTC.breakdown.nrnrPenalty=-2,n["WTC-Compact"].score-=1,n["WTC-Compact"].breakdown.nrnrPenalty=-1);const _=(c.match(/^\s*\d+\s+with\s+/gmi)||[]).length;_>0&&(n.WTC.score+=2,n.WTC.breakdown.withLines=_,n["WTC-Compact"].score+=2,n["WTC-Compact"].breakdown.withLines=_),a.some(M=>/^(?:CHARACTER|OTHER DATASHEETS|CHARACTERS)\s*$/.test((M||"").trim()))&&(n.WTC.score+=1,n.WTC.breakdown.sectionHeaders=1),y&&(n["WTC-Compact"].score-=1,n["WTC-Compact"].breakdown.charMarkerPenalty=-1),p>0&&(n.WTC.score-=2,n.WTC.breakdown.compactInlinePenalty=-2);const w=/Exported with/i.test(c);(/Exported with/i.test(g)||w)&&(n.GWAPP.score+=6,n.GWAPP.breakdown.exportedWith=6),/\b(CHARACTERS|BATTLELINE|OTHER DATASHEETS|ALLIED UNITS)\b/i.test(c)&&(n.GWAPP.score+=2,n.GWAPP.breakdown.sectionHeaders=2),/\(\s*\d+\s*(?:pts|points)\s*\)/i.test(g)&&(n.GWAPP.score+=1,n.GWAPP.breakdown.titleParenPts=1),w&&(n["NR-GW"].score-=4,n["NR-GW"].breakdown.gwappPenalty=-4),/^\s*Strike Force\s*\(\s*\d{2,5}\s*points\s*\)/mi.test(c)&&(n.GWAPP.score+=3,n.GWAPP.breakdown.strikeForce=3),/\b(CHARACTERS|BATTLELINE|OTHER DATASHEETS|DEDICATED TRANSPORTS)\b/i.test(c)&&(n["NR-GW"].score+=2,n["NR-GW"].breakdown.sectionHeaders=2);const T=(c.match(/^[ \t]*(?:•|\u2022|◦|\-|\+)\s+/gmi)||[]).length;T>0&&!w&&(n["NR-GW"].score+=1,n["NR-GW"].breakdown.bulletCount=T),i.length>0&&!w&&(n["NR-GW"].score+=1,n["NR-GW"].breakdown.parenItem=i.length);const R=(c.match(/^[ \t]*(?:•|\u2022|◦|\-|\+)\s*\d+x?\s+[A-Za-z0-9\-\'’]+/gmi)||[]).length;R>=3&&!y&&!w&&(n["NR-GW"].score+=3,n["NR-GW"].breakdown.bulletQty=R);const E=/^(?:\s*)\d+x?\s+.*\(\s*\d{1,4}\s*(?:pts|points)\s*\)/i,v=e.filter(M=>E.test(M)).length;if(v>=2&&!y&&!w&&(n["NR-GW"].score+=2,n["NR-GW"].breakdown.unitLinesNoChar=v),!y&&!w&&(R>=3||v>=2)&&(n.WTC.score-=2,n.WTC.breakdown.nrGwPenalty=-2,n["WTC-Compact"].score-=2,n["WTC-Compact"].breakdown.nrGwPenalty=-2),(f||o)&&(n["NR-GW"].score-=1,n["NR-GW"].breakdown.nrnrPenalty2=-1),c.indexOf("’")!==-1)for(const M of Object.keys(n))n[M].score+=.5,n[M].breakdown=n[M].breakdown||{},n[M].breakdown.unicodeApostrophe=.5;const x={};for(const M of Object.keys(n)){const L=n[M],P=Math.max(0,Math.min(1,L.score/(L.maxScore||8)));x[M]={score:L.score,confidence:P,scoreBreakdown:L.breakdown}}const D=Object.keys(x).sort((M,L)=>x[L].score-x[M].score)[0],H=x[D]||{score:0,confidence:0};return{format:D,confidence:H.confidence,score:H.score,scoreBreakdown:H.scoreBreakdown,all:x}}function Pt(t){const e=String(t||"").trim().match(/^(\d+)\s+(.*)$/);return e&&!/^\d+x\b/i.test(String(t||""))?`${e[1]}x ${e[2]}`:t}function Ft(t){const e=String(t||"").trim().replace(/^E:\s*/i,"").replace(/^Enhancement:\s*/i,"").trim(),a=e.match(/\(([^)]*pts?[^)]*)\)\s*$/i),c=e.replace(/\s*\([^)]*\)\s*$/,"").trim(),h=`E: ${c.split(/\s+/).map(f=>f[0]?f[0].toUpperCase():"").join("")}${a?` (${a[1].trim()})`:""}`.trim();return{quantity:"1x",name:`Enhancement: ${c}`,nameshort:h,items:[],type:"special"}}function dr(t,e){if(!t)return;t.items=t.items||[];const a=Pt(String(e||"").trim());if(/^(E:|Enhancement:)/i.test(a)){const n=Ft(a),h=k(n.name.replace(/^Enhancement:\s*/i,""));(t.items||[]).some(o=>/^Enhancement:/i.test(o.name||"")&&k(String(o.name).replace(/^Enhancement:\s*/i,"").replace(/\s*\([^)]*\)\s*$/,""))===h)||t.items.push(n);return}const c=a.split(",").map(n=>n.trim()).filter(Boolean);for(const n of c){const h=ne(n.replace(/^with\s+/i,"")),f=h.quantity||"1x",o=h.name||"";if(!o)continue;const l=k(o),s=t.items.find(u=>k(u.name||"")===l);if(s){const u=parseInt(String(s.quantity||"1x").replace(/[^0-9]/g,""),10)||0,r=parseInt(String(f).replace(/[^0-9]/g,""),10)||0;s.quantity=`${u+r}x`}else t.items.push({quantity:f,name:o,items:[],type:"wargear",nameshort:""})}}function gr(t,e){const a=t[e]||"",c=V(a);for(let n=e+1;n<t.length;n++){const h=t[n]||"";if(!h.trim())continue;const f=V(h),o=/^\s*•\s*/.test(h);return f>c&&o}return!1}function yr(t){const e={SUMMARY:{},CHARACTER:[],"OTHER DATASHEETS":[]};if(!Array.isArray(t))return e;const a=t.slice(0,30).map(i=>String(i||""));let c=!1;for(const i of a){const m=i.match(/^\s*([A-Za-z ][A-Za-z ]*):\s*(.*)$/);if(!m)continue;const p=m[1].trim().toLowerCase(),C=m[2].trim();if(p==="list name"&&(e.SUMMARY.LIST_TITLE=C,c=!0),p==="factions used"&&(e.SUMMARY.FACTION_KEYWORD=C,c=!0),p==="army points"){const d=parseInt(C.replace(/[^0-9]/g,""),10);d&&(e.SUMMARY.TOTAL_ARMY_POINTS=`${d}pts`,c=!0)}p==="detachment rule"&&(e.SUMMARY.DETACHMENT=C,c=!0)}if(!c){const i=t.find(m=>String(m||"").trim());if(i){const m=String(i).match(/^(.*?)\s*-\s*(.*?)\s*-\s*(.*?)\s*\((\d+)\s*Points?\)/i);m&&(e.SUMMARY.LIST_TITLE=m[1].trim(),e.SUMMARY.FACTION_KEYWORD=m[2].trim(),e.SUMMARY.DETACHMENT=m[3].trim(),e.SUMMARY.TOTAL_ARMY_POINTS=`${parseInt(m[4],10)}pts`)}}const n=/^\s*([A-Za-z ]+):\s*$/,h=/^\s*(.*?)\s*\((\d+)\s*pts?\)\s*$/i,f=/^\s*•\s*(.*)$/;let o=null;const l=[];for(let i=0;i<t.length;i++){const m=String(t[i]||"");if(!m.trim())continue;const C=m.match(n);if(C){const _=C[1].trim().toLowerCase();o=/hero|character/.test(_)?"CHARACTER":"OTHER DATASHEETS",l.length=0;continue}const d=m.match(h);if(d&&V(m)===0){const _=d[1].trim(),w=parseInt(d[2],10)||0,T={quantity:"1x",name:_,points:w,items:[],isComplex:!1,nameshort:""},R=o==="CHARACTER"?"CHARACTER":"OTHER DATASHEETS";e[R]=e[R]||[],e[R].push(T),l.length=0,l.push({indent:0,node:T});continue}const S=m.match(f);if(!S)continue;const A=S[1].trim(),b=V(m);for(;l.length>0&&b<=l[l.length-1].indent;)l.pop();const g=l.length>0?l[l.length-1].node:null;if(!g||/^B:\s*/i.test(A))continue;if(/^(E:|Enhancement:)/i.test(A)){const _=Ft(A),w=l[0]?l[0].node:g;w.items=w.items||[],(w.items||[]).some(R=>/^Enhancement:/i.test(R.name||"")&&k(R.name)===k(_.name))||w.items.push(_);continue}if(gr(t,i)){const _=ne(Pt(A));let w=_.name||"";w=w.replace(/\s+w\/.*$/i,"").trim();const T={quantity:_.quantity||"1x",name:w,items:[],type:"subunit"};g.items=g.items||[],g.items.push(T),l.push({indent:b,node:T});continue}dr(g,A)}function s(i){const m=parseInt(String(i||"1x").replace(/[^0-9]/g,""),10);return Number.isFinite(m)&&m>0?m:1}for(const i of["CHARACTER","OTHER DATASHEETS"]){const m=e[i]||[];for(const p of m){const C=Array.isArray(p.items)?p.items:[],d=C.filter(g=>g&&g.type==="subunit");if(d.length<=1)continue;const S=new Map;for(const g of d){const y=k((g.name||"").replace(/\s+w\/.*/i,"").trim());S.has(y)||S.set(y,{name:g.name,qty:0,wargear:new Map});const _=S.get(y);_.qty+=s(g.quantity);const w=Array.isArray(g.items)?g.items:[];for(const T of w){const R=k(T.name||""),E=_.wargear.get(R)||{name:T.name,qty:0,type:T.type||"wargear"};E.qty+=s(T.quantity),_.wargear.has(R),_.wargear.set(R,E)}}const A=C.filter(g=>!(g&&g.type==="subunit")),b=[];for(const[,g]of S){const y={quantity:`${g.qty}x`,name:g.name,items:[],type:"subunit"};for(const[,_]of g.wargear)y.items.push({quantity:`${_.qty}x`,name:_.name,items:[],type:_.type||"wargear",nameshort:""});b.push(y)}p.items=[...A,...b]}}const u=e.SUMMARY&&e.SUMMARY.FACTION_KEYWORD?String(e.SUMMARY.FACTION_KEYWORD).trim():"";function r(i){if(!i||!u)return i;const m=new RegExp("^"+u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\s+","i");return String(i).replace(m,"").trim()}if(u)for(const i of["CHARACTER","OTHER DATASHEETS"]){const m=e[i]||[];for(const p of m){p.name=r(p.name);const C=(p.items||[]).filter(d=>d&&d.type==="subunit");for(const d of C)d.name=r(d.name)}}for(const i of["CHARACTER","OTHER DATASHEETS"]){const m=e[i]||[];for(const p of m){Array.isArray(p.items)&&p.items.length>0&&K(p.items);const C=(p.items||[]).filter(d=>d&&d.type==="subunit");for(const d of C)Array.isArray(d.items)&&d.items.length>0&&K(d.items)}}return le(e),e}function Cr(t){try{const e=pr(t).format;return e==="NRNR"?"NRNR":e==="WTC-Compact"?"WTC_COMPACT":e==="WTC"?"WTC":e==="GWAPP"?"GW_APP":e==="NR-GW"?"NR_GW":e==="LF"?"LF":"UNKNOWN"}catch(e){const a=Array.isArray(t)?t.slice(0,25):[],c=a.some(h=>/^\s*\+\s*FACTION KEYWORD:/i.test(h)||/^\s*\+\s*DETACHMENT:/i.test(h)),n=a.some(h=>/^(?:CHARACTERS|CHARACTER|BATTLELINE|OTHER DATASHEETS|ALLIED UNITS|DEDICATED TRANSPORTS)$/i.test((h||"").trim().toUpperCase()));return c&&n?"NR_GW":a.some(h=>/^\s*\+\s*FACTION KEYWORD:/i.test(h))?"WTC_COMPACT":n?"GW_APP":"UNKNOWN"}}const O=typeof document!="undefined"&&document;O&&document.getElementById("inputText");O&&document.getElementById("unabbreviatedOutput");O&&document.getElementById("compactedOutput");O&&document.getElementById("markdownPreviewOutput");O&&document.getElementById("debugOutput");O&&document.getElementById("parseButton");O&&document.getElementById("resetButton");O&&document.getElementById("toggleDebugButton");O&&document.getElementById("copyExtendedButton");O&&document.getElementById("outputFormatSelect");O&&document.getElementById("copyPreviewButton");O&&document.getElementById("customColorPickers");O&&document.getElementById("inputCharCount");O&&document.getElementById("extendedCharCount");O&&document.getElementById("compactCharCount");O&&document.getElementById("markdownPreviewCharCount");O&&document.getElementById("copyPopup");typeof AnsiUp!="undefined"&&new AnsiUp;function Sr(){const t=document.getElementById("multilineHeaderCheckbox");return t?t.checked:!1}function Ye(t){if(!t)return null;const a=t.replace(/\(.*?\)/g,"").replace(/[\-]/g," ").replace(/["'`.,;:?!]/g,"").trim().split(/\s+/).filter(Boolean);return a.length===0?null:a.length===1?a[0].slice(0,2).toUpperCase():a.map(n=>{const h=n.toString().toLowerCase();return h==="and"?"&":h==="of"?"o":n[0].toUpperCase()}).join("")}function Ct(t){return Ye(t)}function Ar(t){const e=Object.create(null),a=Object.create(null),c=f=>!f||!f.type?1:f.type==="wargear"?3:f.type==="special"?2:1,n=(f,o)=>{const l=(o||"").replace(/\(.*?\)/g,"").replace(/[\-]/g," ").trim().split(/\s+/)[0]||"";let s=1;for(;;){const u=l.length>1?l.slice(1,1+s).toLowerCase():String(s),r=f+u;if(!a[r])return r;if(s++,s>100)return f+String(Date.now()).slice(-4)}};if(!t)return{__flat_abbr:e};const h=f=>{if(f){if(Array.isArray(f)){f.forEach(o=>h(o));return}if(f.items&&Array.isArray(f.items))for(const o of f.items){if(!o||!o.name)continue;const l=o.name.toString().trim(),s=l.toLowerCase();if(s!=="warlord"){if(o.type==="special"&&l.toLowerCase().startsWith("enhancement:")){const u=l.replace(/^Enhancement:\s*/i,"").trim(),r=u.replace(/\(.*?\)/g,"").trim(),i=Ye(r||u);if(i&&i.toUpperCase()!=="NULL"){let m=i;const p=2;if(a[m]){const C=a[m];if(p>C.priority){const d=n(m,C.name);(C.keys||[]).forEach(S=>{e[S]=d}),a[d]={name:C.name,keys:C.keys,priority:C.priority},e[s]=m,a[m]={name:l,keys:[s],priority:p}}else{const d=n(m,l);e[s]=d,a[d]={name:l,keys:[s],priority:p}}}else e[s]=m,a[m]={name:l,keys:[s],priority:p};u&&u.toLowerCase()!==s&&(e[u.toLowerCase()]=e[s],a[e[s]].keys.push(u.toLowerCase())),r&&r.toLowerCase()!==s&&r.toLowerCase()!==u.toLowerCase()&&(e[r.toLowerCase()]=e[s],a[e[s]].keys.push(r.toLowerCase()))}}if(o.nameshort&&typeof o.nameshort=="string"&&o.nameshort.trim().length>0){let u=o.nameshort.trim();const r=c(o);if(a[u]){const i=a[u];if(r>i.priority){const m=n(u,i.name);(i.keys||[]).forEach(p=>{e[p]=m}),a[m]={name:i.name,keys:i.keys,priority:i.priority},e[s]=u,a[u]={name:l,keys:[s],priority:r}}else{const m=n(u,l);e[s]=m,a[m]={name:l,keys:[s],priority:r}}}else e[s]=u,a[u]={name:l,keys:[s],priority:r}}else if(!e[s]){const u=Ye(l);if(u&&u.toUpperCase()!=="NULL"){let r=u;const i=c(o);if(a[r]){const m=a[r];if(i>m.priority){const p=n(r,m.name);(m.keys||[]).forEach(C=>{e[C]=p}),a[p]={name:m.name,keys:m.keys,priority:m.priority},e[s]=r,a[r]={name:l,keys:[s],priority:i}}else{const p=n(r,l);e[s]=p,a[p]={name:l,keys:[s],priority:i}}}else e[s]=r,a[r]={name:l,keys:[s],priority:i}}}o.items&&h(o.items)}}}};for(const f of Object.keys(t||{})){if(f==="SUMMARY")continue;const o=t[f];h(o)}return{__flat_abbr:e}}const _r={"World Eaters":{unit:"red",subunit:"grey",wargear:"yellow",points:"green",header:"red"},"Adepta Sororitas":{unit:"white",subunit:"grey",wargear:"red",points:"yellow",header:"white"},"Adeptus Custodes":{unit:"yellow",subunit:"red",wargear:"white",points:"yellow",header:"yellow"},"Adeptus Mechanicus":{unit:"red",subunit:"grey",wargear:"white",points:"green",header:"red"},"Adeptus Titanicus":{unit:"white",subunit:"grey",wargear:"blue",points:"yellow",header:"yellow"},Aeldari:{unit:"green",subunit:"blue",wargear:"white",points:"grey",header:"green"},"Astra Militarum":{unit:"grey",subunit:"green",wargear:"cyan",points:"yellow",header:"grey"},"Black Templars":{unit:"white",subunit:"grey",wargear:"black",points:"yellow",header:"white"},"Blood Angels":{unit:"red",subunit:"grey",wargear:"white",points:"yellow",header:"red"},"Chaos Daemons":{unit:"red",subunit:"grey",wargear:"green",points:"yellow",header:"red"},"Chaos Knights":{unit:"red",subunit:"grey",wargear:"blue",points:"yellow",header:"red"},"Chaos Space Marines":{unit:"red",subunit:"grey",wargear:"green",points:"yellow",header:"red"},"Dark Angels":{unit:"green",subunit:"grey",wargear:"white",points:"yellow",header:"green"},"Death Guard":{unit:"green",subunit:"grey",wargear:"blue",points:"yellow",header:"green"},Deathwatch:{unit:"black",subunit:"grey",wargear:"blue",points:"yellow",header:"black"},Drukhari:{unit:"magenta",subunit:"grey",wargear:"cyan",points:"yellow",header:"magenta"},"Emperor's Children":{unit:"magenta",subunit:"grey",wargear:"white",points:"yellow",header:"magenta"},"Genestealer Cults":{unit:"cyan",subunit:"grey",wargear:"green",points:"yellow",header:"cyan"},"Grey Knights":{unit:"white",subunit:"grey",wargear:"blue",points:"yellow",header:"white"},"Imperial Fists":{unit:"yellow",subunit:"grey",wargear:"blue",points:"yellow",header:"yellow"},"Imperial Knights":{unit:"white",subunit:"grey",wargear:"blue",points:"yellow",header:"white"},"Iron Hands":{unit:"grey",subunit:"white",wargear:"grey",points:"white",header:"grey"},"Leagues of Votann":{unit:"white",subunit:"grey",wargear:"blue",points:"yellow",header:"white"},Necrons:{unit:"green",subunit:"grey",wargear:"blue",points:"yellow",header:"green"},Orks:{unit:"green",subunit:"grey",wargear:"blue",points:"yellow",header:"green"},"Raven Guard":{unit:"black",subunit:"grey",wargear:"blue",points:"yellow",header:"black"},Salamanders:{unit:"green",subunit:"grey",wargear:"white",points:"yellow",header:"green"},"Space Marines":{unit:"blue",subunit:"grey",wargear:"white",points:"yellow",header:"blue"},"Space Wolves":{unit:"blue",subunit:"grey",wargear:"white",points:"yellow",header:"blue"},"T'au Empire":{unit:"yellow",subunit:"grey",wargear:"white",points:"Cyan",header:"cyan"},"Thousand Sons":{unit:"magenta",subunit:"grey",wargear:"blue",points:"yellow",header:"magenta"},Tyranids:{unit:"cyan",subunit:"grey",wargear:"green",points:"yellow",header:"cyan"},Ultramarines:{unit:"blue",subunit:"grey",wargear:"white",points:"yellow",header:"blue"},"White Scars":{unit:"white",subunit:"grey",wargear:"red",points:"yellow",header:"white"},"Agents of the Imperium":{unit:"white",subunit:"grey",wargear:"blue",points:"yellow",header:"white"}},qe=[{hex:"#000000",code:30},{hex:"#FF0000",code:31},{hex:"#00FF00",code:32},{hex:"#FFFF00",code:33},{hex:"#0000FF",code:34},{hex:"#FF00FF",code:35},{hex:"#00FFFF",code:36},{hex:"#FFFFFF",code:37},{hex:"#808080",code:90}],St={black:"#000000",red:"#FF0000",green:"#00FF00",yellow:"#FFFF00",blue:"#0000FF",magenta:"#FF00FF",cyan:"#00FFFF",white:"#FFFFFF",grey:"#808080"},Ue=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},Tr=t=>{const e=Ue(t);if(!e)return 37;let a=37,c=1/0;for(const n of qe){const h=Ue(n.hex),f=Math.pow(e.r-h.r,2)+Math.pow(e.g-h.g,2)+Math.pow(e.b-h.b,2);f<c&&(c=f,a=n.code)}return a};function ke(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(ke);const e={};for(const[a,c]of Object.entries(t))a!=="_parent"&&(e[a]=ke(c));return e}function Ot(t){const e=o=>{const l=[...new Set(qe.map(u=>u.code))],s={};for(const u of Object.keys(o||{})){const r=u||"",i=Math.abs(Array.from(r).reduce((b,g)=>b*31+g.charCodeAt(0),0))%l.length,m=l[i],p=b=>l.find(g=>!b.includes(g))||l[0],C=p([m]),d=p([C]),S=p([d]),A=b=>{const g=qe.find(y=>y.code===b);return g?g.hex:"#FFFFFF"};s[r]={unit:A(m),subunit:A(C),wargear:A(d),points:A(S)}}return s},a=_r||{},c=e(t||{}),n=ue(ue({},c),a),h={},f=o=>{if(!o)return"";try{return o.toString().normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").replace(/[\u2018\u2019\u201B\u2032]/g,"'").replace(/[^\w\s'\-]/g,"").toLowerCase().trim()}catch(l){return o.toString().toLowerCase().trim()}};for(const[o,l]of Object.entries(n)){const s={};["unit","subunit","wargear","points","header"].forEach(u=>{if(!l||l[u]===void 0)return;const r=l[u];typeof r=="string"&&r.startsWith("#")?s[u]=r:typeof r=="string"&&St[r.toString().toLowerCase()]?s[u]=St[r.toString().toLowerCase()]:s[u]=r}),h[o]=s;try{h[o.toString().toLowerCase()]=s}catch(u){}try{h[f(o)]=s}catch(u){}}return h}const Re="__HIDE_ALL_WARGEARS__";function Ke(t){const e=new Map,a=[];function c(l){!l||!l.items||l.items.forEach(s=>{if(s.type==="wargear"){const u=s.name,r=parseInt((s.quantity||"1").toString().replace("x",""),10)||1,i=e.get(u)||{name:u,quantity:0,type:"wargear"};i.quantity+=r,e.set(u,i)}else s.type==="special"&&a.push(s);s.items&&Array.isArray(s.items)&&s.items.length>0&&c(s)})}c(t);const n=Array.from(e.values()).map(l=>De(ue({},l),{quantity:`${l.quantity}x`})),h=[...a,...n],f=h.filter(l=>l.type==="special"),o=h.filter(l=>l.type==="wargear");return K(o),[...f,...o]}function Le(t,e,a){if(!e||!t||t.toString().trim().toLowerCase()==="warlord")return null;const c=(t||"").toLowerCase(),n=o=>o?typeof o=="string"?o:typeof o=="object"&&(o.abbr||o.ABBR)||null:null;try{const o=e.__flat_abbr,l=e.__faction_index;if(o&&o[c]!==void 0)return n(o[c]);const s=a&&(a.DISPLAY_FACTION||a.FACTION_KEYWORD)||null;if(s&&l){const u=s.toString().toLowerCase(),r=l[u]||l[s]||l[s.toLowerCase()]||null;if(r&&r[c]!==void 0)return n(r[c])}}catch(o){}if(e[c])return n(e[c]);const h=a&&(a.DISPLAY_FACTION||a.FACTION_KEYWORD)||null;if(h){const o=[h,h.toLowerCase(),h.toUpperCase()].map(l=>e[l]).filter(Boolean);for(const l of o)if(typeof l=="object"){if(l[c])return n(l[c]);for(const s of Object.keys(l))if(s.toLowerCase()===c)return n(l[s]);if(Array.isArray(l)){for(const s of l)if(s.item&&s.item.toLowerCase()===c||s.name&&s.name.toLowerCase()===c)return n(s.abbr||s.ABBR||s.value||s)}}}const f=[e];for(;f.length;){const o=f.shift();if(o){if(Array.isArray(o)){for(const l of o)if(l&&(l.item||l.name)&&(l.item||l.name).toLowerCase()===c)return n(l.abbr||l.ABBR||l.value||l);continue}if(typeof o=="object")for(const[l,s]of Object.entries(o)){if(l.toLowerCase()===c)return n(s);typeof s=="object"&&f.push(s)}}}return null}function Ge(t,e,a,c){if(!t||t.length===0)return"";const n=[],h=[];t.filter(o=>o.type==="special").forEach(o=>{const l=o.name||"";if(l.toString().trim().toLowerCase()==="warlord"){n.push("Warlord");return}if(l.toString().startsWith&&l.toString().startsWith("Enhancement:")){const s=l.toString().replace(/^Enhancement:\s*/i,"").trim(),u=/\(([^)]+)\)/.exec(s);let r="";u&&(r=u[1].replace(/\s*pts\s*/i,"").trim(),r=r.startsWith("+")?`(${r})`:`(${r})`);const i=s.replace(/\(.*?\)/g,"").trim();let m=null;e&&(m=Le(s,a,c)||Le(i,a,c)),!m&&e&&(m=Ct(i||s));const p=`E: ${m||i}${r?" "+r:""}`;n.push(p);return}n.push(l)}),t.filter(o=>o.type==="wargear").forEach(o=>{const s=(parseInt((o.quantity||"1").toString().replace("x",""),10)||1)>1?`${o.quantity} `:"";let u=null;if(e&&(u=Le(o.name,a,c)),u==="NULL")return;!u&&e&&o.nameshort&&(u=o.nameshort),!u&&e&&(u=Ct(o.name));const r=e&&u?u:o.name;h.push(`${s}${r}`)});const f=[...n,...h].filter(Boolean);return f.length?` (${f.join(", ")})`:""}function be(t,e,a){if(!t)return[];if(!a)return[];const c=e&&(e.DISPLAY_FACTION||e.FACTION_KEYWORD||e.FACTION)||"",n=s=>{if(!s)return"";try{return s.toString().normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").toLowerCase().trim()}catch(u){return s.toString().toLowerCase().trim()}},h=n(a),f=h.endsWith("s")?h.slice(0,-1):h+"s",o=s=>s===!0?[Re]:Array.isArray(s)?s.length===0?[]:s.map(u=>(u||"").toString().toLowerCase()):[],l=s=>{if(!s)return;const u=n(s);if(Object.prototype.hasOwnProperty.call(t,s))return t[s];for(const[r,i]of Object.entries(t))if(r&&n(r)===u)return i};if(c){const s=[c,(c||"").toString()];for(const u of s){const r=l(u);if(!r)continue;const i=[a,h,f];for(const m of i)if(m!==void 0&&Object.prototype.hasOwnProperty.call(r,m))return o(r[m]);for(const[m,p]of Object.entries(r))if(m&&(n(m)===h||n(m)===f))return o(p)}if(typeof c=="string"&&c.includes(" - ")){const u=c.split(" - ").pop(),r=l(u);if(r){for(const[i,m]of Object.entries(r))if(i&&(n(i)===h||n(i)===f))return o(m)}}}for(const[s,u]of Object.entries(t)){if(!s)continue;const r=n(s);if(r===h||r===f)return o(u);if(typeof u=="object"){if(Object.prototype.hasOwnProperty.call(u,a))return o(u[a]);if(Object.prototype.hasOwnProperty.call(u,h))return o(u[h]);if(Object.prototype.hasOwnProperty.call(u,f))return o(u[f]);for(const[i,m]of Object.entries(u))if(i&&(n(i)===h||n(i)===f))return o(m)}}return[]}function br(t,e){parseInt((t.quantity||"1").toString().replace("x",""),10);const a=(t.name||"").toString(),c=t.points||0,n=(t.items||[]).filter(f=>f.type==="wargear"||f.type==="special").map(f=>({t:f.type,n:f.name,q:parseInt((f.quantity||"1").toString().replace("x",""),10)||1})).sort((f,o)=>f.t.localeCompare(o.t)||f.n.localeCompare(o.n)||f.q-o.q);let h="";if(!e){const f=(t.items||[]).filter(o=>o.type==="subunit").map(o=>({n:o.name,q:parseInt((o.quantity||"1").toString().replace("x",""),10)||1})).sort((o,l)=>o.n.localeCompare(l.n)||o.q-l.q);h=JSON.stringify(f)}return JSON.stringify({name:a,points:c,top:n,subsKey:h})}function Nt(t,e,a){if(!a)return t;const c=new Map;for(const h of t){const f=br(h,e);c.has(f)||c.set(f,[]),c.get(f).push(h)}const n=[];for(const[h,f]of c.entries()){if(f.length===1){const s=ke(f[0]);s.__groupCount=1,s.__unitSize=parseInt((s.quantity||"1").toString().replace("x",""),10)||1,n.push(s);continue}const o=ke(f[0]),l=parseInt((o.quantity||"1").toString().replace("x",""),10)||1;o.__groupCount=f.length,o.__unitSize=l,n.push(o)}return n}function At(t,e,a,c,n,h=!0,f=!1){var r,i;let o="",l="";const s=((r=t.SUMMARY)==null?void 0:r.DISPLAY_FACTION)||((i=t.SUMMARY)==null?void 0:i.FACTION_KEYWORD)||"";if(t.SUMMARY){const m=[];if(t.SUMMARY.LIST_TITLE&&m.push(t.SUMMARY.LIST_TITLE),s&&m.push(s),t.SUMMARY.DETACHMENT&&m.push(t.SUMMARY.DETACHMENT),t.SUMMARY.TOTAL_ARMY_POINTS&&m.push(t.SUMMARY.TOTAL_ARMY_POINTS),m.length){const p=m.join(" | ");let C="color:var(--color-text-secondary);";if(h){let d=null;try{const S=Ot(n||{}),A=t.SUMMARY&&(t.SUMMARY.FACTION_KEY||t.SUMMARY.FACTION_KEYWORD||t.SUMMARY.DISPLAY_FACTION)||null,b=y=>{if(!y)return null;try{return y.toString().normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").replace(/[\u2018\u2019\u201B\u2032]/g,"'").replace(/[^\w\s'\-]/g,"").toLowerCase().trim()}catch(_){return y.toString().toLowerCase()}},g=A?S[A]||S[A.toString().toLowerCase()]||S[b(A)]:null;g&&g.header&&(d=g.header)}catch(S){}C=d?`color:${d};`:"color:var(--color-text-secondary);"}o+=`<div style="padding-bottom:0.5rem;border-bottom:1px solid var(--color-border);"><p style="font-size:0.75rem;margin-bottom:0.25rem;${C}font-weight:600;">${p}</p></div>`,l+=p+`

`}}o+='<div style="margin-top:0.5rem;">';const u="•";for(const m in t){if(m==="SUMMARY"||!Array.isArray(t[m]))continue;const p=e?c:!1;(e?Nt(t[m],p,f):t[m]).forEach(d=>{const S=parseInt((d.quantity||"1").toString().replace("x",""),10)||1;let A="";if(e&&f&&(d.__groupCount||0)>1){const y=d.__unitSize||S;A=`${d.__groupCount}x${y} `}else A=S>1?`${S} `:"";if(e){const y=be(n,t.SUMMARY,d.name),w=(d.items||[]).filter(E=>E.type==="wargear"||E.type==="special").filter(E=>E.type==="special"?!0:y.includes(Re)?!1:y.length===0||!y.includes(E.name.toLowerCase())),T=Ge(w,e,a,t.SUMMARY),R=`${A}${d.name}${T} [${d.points}]`;o+=`<div><p style="color:var(--color-text-primary);font-weight:600;font-size:0.875rem;margin-bottom:0.25rem;">${R}</p></div>`,l+=`${u} ${R}
`;return}const b=`${A}${d.name} [${d.points}]`;o+=`<div><p style="color:var(--color-text-primary);font-weight:600;font-size:0.875rem;margin-bottom:0.25rem;">${b}</p>`,l+=`${u} ${b}
`;const g=d.items||[];if(p){let y=Ke(d);y.length>0&&(o+='<div style="padding-left:1rem;font-size:0.75rem;color:var(--color-text-secondary);font-weight:400;">',y.forEach(_=>{const T=(parseInt((_.quantity||"1").toString().replace("x",""),10)||1)>1?`${_.quantity} `:"";o+=`<p style="margin:0;">${T}${_.name}</p>`,l+=`  - ${T}${_.name}
`}),o+="</div>")}else{const _=g.filter(T=>T.type==="wargear"||T.type==="special");_.length>0&&(o+='<div style="padding-left:1rem;font-size:0.75rem;color:var(--color-text-secondary);font-weight:400;">',_.forEach(T=>{const E=(parseInt((T.quantity||"1").toString().replace("x",""),10)||1)>1?`${T.quantity} `:"";let v=T.name;if(T.type==="special"&&(T.name||"").toString().startsWith&&(T.name||"").toString().startsWith("Enhancement:")){const x=T.name.toString().replace(/^Enhancement:\s*/i,"").trim();let D="";if(T.nameshort){const M=(T.nameshort||"").toString().match(/\(([^)]+)\)/);M&&(D=M[1].replace(/\s*pts\s*/i,"").trim(),D=D.startsWith("+")?`(${D})`:`(${D})`)}if(!D){const M=/\(([^)]+)\)/.exec(x);M&&(D=M[1].replace(/\s*pts\s*/i,"").trim(),D=D.startsWith("+")?`(${D})`:`(${D})`)}v=`${x.replace(/\(.*?\)/g,"").trim()}${D?" "+D:""}`}o+=`<p style="margin:0;">${E}${v}</p>`,l+=`  - ${E}${v}
`}),o+="</div>");const w=g.filter(T=>T.type==="subunit"||T.items&&T.items.length>0).sort((T,R)=>{const E=parseInt((T.quantity||"1").toString().replace("x",""),10)||1,v=parseInt((R.quantity||"1").toString().replace("x",""),10)||1;return E-v});w.length>0&&(o+='<div style="padding-left:1rem;font-size:0.75rem;color:var(--color-text-secondary);font-weight:400;">',w.forEach(T=>{const R=parseInt((T.quantity||"1").toString().replace("x",""),10)||1,v=`${R>1?`${R} `:""}${T.name}`,x=Ke(T),D=(T.items||[]).some(H=>H.type==="special");x.length===0&&!D||(o+=`<p style="font-weight:500;color:var(--color-text-primary);margin:0;">${v}</p>`,l+=`  * ${v}
`,x.length>0&&x.forEach(H=>{const L=(parseInt((H.quantity||"1").toString().replace("x",""),10)||1)>1?`${H.quantity} `:"";o+=`<p style="margin:0 0 0.125rem 1rem;">${L}${H.name}</p>`,l+=`    - ${L}${H.name}
`}))}),o+="</div>")}o+="</div>"})}return o+="</div>",{html:o,plainText:l}}function pe(t,e,a=!0,c,n,h,f=!1){const o=typeof document!="undefined"&&document.querySelector;let l=!1;const u=ue({},{unit:"#FFFFFF",subunit:"#808080",wargear:"#FFFFFF",points:"#FFFF00",header:"#FFFF00"});if(!e&&o){const C=document.querySelector('input[name="colorMode"]:checked'),d=C?C.value:"none";if(l=d&&d!=="none",l&&d==="custom"){const S=document.getElementById("unitColor"),A=document.getElementById("subunitColor"),b=document.getElementById("wargearColor"),g=document.getElementById("pointsColor"),y=document.getElementById("headerColor");S&&S.value&&(u.unit=S.value),A&&A.value&&(u.subunit=A.value),b&&b.value&&(u.wargear=b.value),g&&g.value&&(u.points=g.value),y&&y.value&&(u.header=y.value)}if(l&&d==="faction"){const S=Ot(h||{}),A=t.SUMMARY&&(t.SUMMARY.FACTION_KEYWORD||t.SUMMARY.DISPLAY_FACTION)||null,g=A?(y=>{if(!y)return null;try{return y.toString().normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").replace(/[\u2018\u2019\u201B\u2032]/g,"'").replace(/[^\w\s'\-]/g,"").toLowerCase().trim()}catch(_){return y.toString().toLowerCase()}})(A):null;if(A&&(S[A]||S[A.toString().toLowerCase()]||g&&S[g])){const y=S[A]||S[A.toString().toLowerCase()]||S[g];y.unit&&(u.unit=y.unit),y.subunit&&(u.subunit=y.subunit),y.wargear&&(u.wargear=y.wargear),y.points&&(u.points=y.points),y.header&&(u.header=y.header)}else if(A&&S[A.toString().toLowerCase()]){const y=S[A.toString().toLowerCase()];y.unit&&(u.unit=y.unit),y.subunit&&(u.subunit=y.subunit),y.wargear&&(u.wargear=y.wargear),y.points&&(u.points=y.points),y.header&&(u.header=y.header)}}}const r=(C,d,S=!1)=>{if(!l||!d)return C;if(typeof document!="undefined"&&document.querySelector){const y=Ue(d);return y?`\x1B[${S?"1;":""}38;2;${y.r};${y.g};${y.b}m${C}\x1B[0m`:C}const b=Tr(d);return`\x1B[${S?"1;":""}${b}m${C}\x1B[0m`},i=e?"•":"*",m=e?"◦":"+";let p="";if(e||(p+=l?"```ansi\n":"```\n"),t.SUMMARY){const C=[];if(t.SUMMARY.LIST_TITLE&&C.push(t.SUMMARY.LIST_TITLE),t.SUMMARY.FACTION_KEYWORD&&C.push(t.SUMMARY.DISPLAY_FACTION||t.SUMMARY.FACTION_KEYWORD.split(" - ").pop()),t.SUMMARY.DETACHMENT&&C.push(t.SUMMARY.DETACHMENT),t.SUMMARY.TOTAL_ARMY_POINTS&&C.push(t.SUMMARY.TOTAL_ARMY_POINTS),C.length){const S=typeof document!="undefined"&&document.querySelector?Sr():!1,A=C.join(S?`
`:" | ");p+=l?r(A,u.header,!0)+`

`:A+`

`}}for(const C in t){if(C==="SUMMARY"||!Array.isArray(t[C]))continue;Nt(t[C],n,f).forEach(S=>{const A=parseInt((S.quantity||"1").toString().replace("x",""),10)||1;let b="";if(f&&(S.__groupCount||0)>1){const D=S.__unitSize||A;b=`${S.__groupCount}x${D} `}else b=A>1?`${A} `:"";let g=n?Ke(S):S.items||[];const y=be(h,t.SUMMARY,S.name),_=g.filter(D=>D.type==="special"?!0:y.includes(Re)?!1:y.length===0||!y.includes(D.name.toLowerCase())),w=Ge(_,a,c,t.SUMMARY),T=`${b}${S.name}`,R=l?r(T,u.unit,!0):T,E=l&&w?r(w,u.wargear,!1):w,v=`[${S.points}]`,x=l?r(v,u.points,!0):v;if(p+=`${i} ${R}${E} ${x}
`,!n&&Array.isArray(S.items)){const D=S.items.filter(M=>M.type==="subunit"||M.items&&M.items.length>0),H=be(h,t.SUMMARY,S.name);D.forEach(M=>{const L=parseInt((M.quantity||"1").toString().replace("x",""),10)||1,X=`${L>1?`${L} `:""}${M.name}`,N=l?r(X,u.subunit,!1):X,Y=be(h,t.SUMMARY,M.name),q=Y.length===0?H:Y,$=(M.items||[]).filter(ae=>ae.type==="special"?!0:q.includes(Re)?!1:q.length===0||!q.includes(ae.name.toLowerCase())),Q=(M.items||[]).some(ae=>ae.type==="special"&&(q.length===0||!q.includes(ae.name.toLowerCase())));if($.length===0&&!Q)return;const Z=Ge($,a,c,t.SUMMARY),ee=l&&Z?r(Z,u.wargear,!1):Z;p+=`  ${m} ${N}${ee}
`})}})}return e||(p+="```"),p}const wr={Asurmen:!0,Autarch:[],"Autarch Wayleaper":["Shuriken Pistol","Star Glaive"],"Avatar of Khaine":!0,Baharroth:!0,"Corsair Voidreavers":["Shuriken Pistol","Power Sword","Close Combat Weapon"],"Corsair Voidscarred":["Close Combat Weapon"],"Crimson Hunter":["Pulse laser","Wraithbone Hull"],"D-Cannon Platform":!0,"Dark Reapers":["Close Combat Weapon"],"Death Jester":!0,"Dire Avengers":["Close Combat Weapon"],"Eldrad Ulthran":!0,Falcon:["Pulse laser","Wraithbone Hull"],Farseer:["Eldritch Storm","Shuriken Pistol"],"Farseer Skyrunner":["Eldritch Storm","Shuriken Pistol","Twin Shuriken Catapult"],"Fire Dragons":["Close Combat Weapon","Dragon Fusion Gun"],"Fire Prism":["Prism Cannon","Wraithbone Hull"],Fuegan:!0,"Guardian Defenders":["Shuriken Catapult","Close Combat Weapon"],"Hemlock Wraithfighter":!0,"Howling Banshees":["Shuriken Pistol","Banshee Blade"],"Jain Zar":!0,Lhykhis:!0,"Maugan Ra":!0,"Night Spinner":["Doomweaver","Wraithbone Hull"],"Phantom Titan":["Voidstorm Missile Launcher","Phantom Feet"],Rangers:!0,"Revenant Titan":["Cloudburst Missile Launcher","Revenant Feet"],"Shadow Weaver Platform":!0,Shadowseer:["Shuriken Pistol","Miststave","Flip Belt"],"Shining Spears":[],"Shroud Runners":!0,Skyweavers:["Close Combat Weapon","Skyweaver","Invulnerable Save","Acrobatic Grace"],Solitaire:!0,Spiritseer:!0,Starweaver:!0,"Storm Guardians":["Shuriken Pistol","Close Combat Weapon","Serpent Shield"],"Striking Scorpions":[],"Swooping Hawks":["Close Combat Weapon"],"The Visarch":!0,"The Yncarne":!0,Troupe:["Flip Belt"],"Troupe Master":["Shuriken Pistol","Troupe Master's Blade","Flip Belt"],"Vibro Cannon Platform":!0,Voidweaver:["Shuriken Cannon","Close Combat Weapon"],Vypers:["Wraithbone Hull"],"War Walkers":["War Walker Feet"],Warlock:["Destructor","Shuriken Pistol"],"Warlock Conclave":["Destructor","Shuriken Pistol","Warlock"],"Warlock Skyrunners":["Destructor","Shuriken Pistol","Twin Shuriken Catapult"],"Warp Spiders":["Close Combat Weapon"],"Wave Serpent":["Wraithbone Hull"],Windriders:["Close Combat Weapon"],Wraithblades:["Ghostswords","Wraithblade"],Wraithguard:["Close Combat Weapon"],Wraithknight:["Titanic Feet"],"Wraithknight with Ghostglaive":["Titanic Ghostglaive"],Wraithlord:["Wraithbone Fists","Aeldari Missile Launcher"],"Ynnari Archon":["Huskblade","Shadow Field"],"Ynnari Incubi":["Klaive"],"Ynnari Kabalite Warriors":["Splinter Rifle","Close Combat Weapon"],"Ynnari Raider":["Bladevanes"],"Ynnari Reavers":["Splinter Pistol","Bladevanes"],"Ynnari Succubus":["Succubus Weapons"],"Ynnari Venom":["Bladevanes"],"Ynnari Wyches":["Splinter Pistol","Hekatarii Blade"],Yvraine:!0},kr={"Corvus Blackstar":["Armoured Hull"],"Deathwatch Terminator Squad":[],"Deathwatch Veterans":[],"Fortis Kill Team":[],"Indomitor Kill Team":[],"Spectrus Kill Team":[],"Talonstrike Kill Team":[],"Watch Captain Artemis":!0,"Watch Master":!0},Rr={Archon:["Huskblade"],Beastmaster:!0,"Court of the Archon":!0,Cronos:["Spirit Syphon","Spirit-Leech Tentacles"],Drazhar:!0,Grotesques:["Monstrous Weapons"],Haemonculus:!0,Hellions:["Splinter Pods","Hellglaive"],Incubi:["Klaive"],"Kabalite Warriors":["Splinter Rifle","Close Combat Weapon"],"Lelith Hesperax":!0,Mandrakes:!0,Raider:["Bladevanes"],Ravager:["Bladevanes"],"Razorwing Jetfighter":["Razorwing Missiles","Bladed Wings"],Reavers:["Splinter Pistol","Bladevanes"],Scourges:["Close Combat Weapon"],Succubus:["Succubus Weapons"],Talos:[],"Urien Rakarth":!0,Venom:["Bladevanes"],"Voidraven Bomber":["Bladed Wings"],Wracks:["Wrack Blades"],Wyches:["Splinter Pistol","Hekatarii Blade"]},Er={"Annihilation Barge":["Twin Tesla Destructor","Armoured Bulk"],"C'tan Shard of the Deceiver":!0,"C'tan Shard of the Nightbringer":!0,"C'tan Shard of the Void Dragon":!0,"Canoptek Doomstalker":!0,"Canoptek Reanimator":!0,"Canoptek Scarab Swarms":!0,"Canoptek Spyders":["Automaton Claws"],"Canoptek Wraiths":[],"Catacomb Command Barge":[],Chronomancer:!0,"Convergence of Dominion":!0,Cryptothralls:!0,Deathmarks:!0,"Doom Scythe":!0,"Doomsday Ark":!0,"Flayed Ones":!0,"Ghost Ark":!0,"Hexmark Destroyer":!0,"Illuminor Szeras":!0,Immortals:["Close Combat Weapon"],"Imotekh the Stormlord":!0,"Lokhust Destroyers":!0,"Lokhust Heavy Destroyers":["Close Combat Weapon"],"Lokhust Lord":["Nanoscarab Amulet"],Lychguard:[],Monolith:["Particle Whip","Portal of Exile"],"Necron Warriors":["Close Combat Weapon"],"Night Scythe":!0,Obelisk:!0,"Ophydian Destroyers":["Ophydian Hyperphase Weapons"],"Orikan the Diviner":!0,Overlord:[],"Overlord with Translocation Shroud":!0,Plasmancer:!0,Psychomancer:!0,"Royal Warden":!0,"Seraptek Heavy Construct":["Titanic Forelimbs"],"Skorpekh Destroyers":["Skorpekh Hyperphase Weapons"],"Skorpekh Lord":!0,Technomancer:!0,"Tesseract Vault":!0,"The Silent king":!0,"Tomb Blades":["Close Combat Weapon"],"Transcendent C'tan":!0,"Trazyn the Infinite":!0,"Triarch Praetorians":[],"Triarch Stalker":["Stalker's Forelimbs"]},Mr={Battlewagon:[],"Beast Snagga Boyz":[],Beastboss:!0,"Beastboss on Squigosaur":["Slugga","Beastchoppa","Squigosaur's Jaws"],"Big Mek":[],"Big Mek in Mega Armour":[],"Big Mek with Shokk Attack Gun":["Close Combat Weapon","Shokk Attack Gun"],"Big'ed Bossbunka":["Gaze of Gork"],"Blitza-Bommer":!0,"Boomdakka Snazzwagon":!0,"Boss Snikrot":!0,Boyz:[],"Breaka Boyz":[],"Burna Boyz":["Burna","Cuttin' Flames","Close Combat Weapon"],"Burna-Bommer":["Twin Big Shoota","Twin Supa-Shoota","Armoured Hull"],Dakkajet:["Armoured Hull"],"Deff Dread":["Stompy Feet"],"Deffkilla Wartrike":!0,Deffkoptas:["Slugga","Spinnin' Blades"],"Flash Gitz":["Snazzgun","Choppa"],"Gargantuan Squiggoth":["Huge Tusks"],"Ghazghkull Thraka":!0,Gorkanaut:!0,Gretchin:!0,"Hunta Rig":!0,"Kill Rig":!0,"Killa Kans":["Kan Klaw"],Kommandos:[],"Kustom Boosta-Blasta":!0,Lootas:["Close Combat Weapon","Deffgun"],"Mozrog Skragbad":!0,Meganobz:[],"Megatrakk Scrapjet":!0,Mek:["Kustom-Mega Slugga"],"Mek Gunz":["Grot Crew"],Morkanaut:!0,Nobz:[],Painboss:["Beast Snagga klaw"],Painboy:["Power Klaw","urty Syringe"],"Rukkatrukk Squigbuggy":!0,"Shokkjump Dragsta":!0,"Squighog Boyz":["Slugga","Big Choppa","Squig Jaws","Saddlegit Weapons","Stikka"],Stompa:!0,Stormboyz:["Slugga"],Tankbustas:["Choppa","Close Combat Weapon"],Trukk:["Big Shoota","Spiked Wheels"],Warbikers:["Twin Dakkagun","Close Combat Weapon"],Warboss:["Kombi-weapon","Twin Slugga"],"Warboss in Mega Armour":!0,"Wazbom Blastajet":["Smasha Gun","Armoured Hull"],Weirdboy:!0,Wurrboy:!0,"Zodgrod Wortsnagga":!0},Ir={"Adrax Agatone":!0,"Vulkan He'stan":!0},xr={Barbgaunts:!0,Biovores:!0,Broodlord:!0,Carnifexes:["Chitinous Claws and Teeth"],Deathleaper:!0,Exocrine:!0,Gargoyles:!0,Genestealers:!0,Harpy:["Stinger Salvoes","Scything Wings"],Harridan:!0,Haruspex:!0,Hierophant:!0,"Hive Crone":!0,"Hive Guard":["Chitinous Claws and Teeth"],"Hive Tyrant":[],Hormagaunts:!0,"Hyperadapted Raveners":!0,Lictor:!0,Maleceptor:!0,Mawloc:!0,"Mucolid Spores":!0,Neurogaunts:!0,Neurolictor:!0,Neurotyrant:!0,"Norn Assimilator":!0,"Norn Emissary":!0,"Old One Eye":!0,"Parasite of Mortrex":!0,Psychophage:!0,Pyrovores:!0,Raveners:!0,"Ripper Swarms":!0,"Screamer-Killer":!0,"Spore Mines":!0,Sporocyst:!0,Termagants:["Chitinous Claws and Teeth","Mucolid Spores (30 pts):"],Tervigon:["Stinger Salvoes"],"The Swarmlord":!0,Toxicrene:!0,Trygon:!0,"Tyranid Warriors with Melee Bio-Weapons":!0,"Tyranid Warriors with Ranged Bio-weapons":["Tyranid Warrior claws and talons"],Tyrannocyte:!0,Tyrannofex:["Stinger Salvoes","Powerful Limbs"],"Tyrant Guard":[],Venomthropes:!0,"Von Ryan's Leapers":!0,"Winged Hive Tyrant":["Tyrant talons"],"Winged Tyranid Prime":!0,Zoanthropes:["Warp blast"]},vr={"Captain Sicarius":!0,"Chief Librarian Tigurius":!0,"Lieutenant Titus":!0,"Marneus Calgar":!0,"Roboute Guilliman":!0,"Uriel Ventris":!0},oe={"World Eaters":{Angron:!0,Bloodcrushers:["Hellblade","Bladed Horn"],Bloodletters:["Hellblade"],Bloodthirster:["Hellfire Breath"],"Chaos Land Raider":["Soulshatter Lascannon","Armoured Tracks","Twin Heavy Bolter"],"Chaos Predator Annihilator":["Predator Twin Lascannon","Armoured Tracks"],"Chaos Predator Destructor":["Predator Autocannon","Armoured Tracks"],"Chaos Rhino":["Armoured Tracks"],"Chaos Spawn":!0,"Daemon Prince":!0,"Daemon Prince of Khorne":!0,"Daemon Prince of Khorne with Wings":!0,Defiler:["Defiler Cannon","Defiler Claws"],Eightbound:!0,"Exalted Eightbound":!0,"Flesh Hounds":!0,Goremongers:["Chainblade","Close Combat Weapon"],Heldrake:["Heldrake Claws"],Jakhals:["Autopistol","Chainblades","Jakhal Chainblades"],"Khorne Berserkers":["Bolt Pistol","Khorne Berserker","Chainblade","Berserker Chainblade"],"Khorne Berzerkers":["Bolt Pistol","Khorne Berzerker","Chainblade","Berzerker Chainblade"],"Khorne Lord of Skulls":["Great Cleaver of Khorne"],"Khârn The Betrayer":!0,"Lord Invocatus":!0,"Lord on Juggernaut":!0,"Master of Executions":!0,Maulerfiend:["Maulerfiend fists"],Skarbrand:!0,Slaughterbound:!0},"Adepta Sororitas":{"Aestred Thurga and Agathae Dolan":!0,"Arco-Flagellants":!0,"Battle Sisters Squad":["Bolt Pistol","Close Combat Weapon"],Canoness:[],"Canoness with Jump Pack":[],Castigator:["Heavy Bolter","Armoured Tracks"],"Celestian Sacresants":[],Daemonifuge:!0,Dialogus:!0,Dogmata:!0,"Dominion Squad":["Bolt Pistol","Boltgun","Close Combat Weapon"],Exorcist:["Heavy Bolter","Armoured Tracks"],Hospitaller:!0,Imagifier:!0,Immolator:["Heavy Bolter","Armoured Tracks"],"Junith Eruita":!0,"Ministorum Priest":[],Mortifiers:[],"Morvenn Vahl":!0,Palatine:["Palatine Blade"],"Paragon Warsuits":["Bolt Pistol"],"Penitent Engines":["Penitent Flamers"],"Repentia Squad":!0,"Retributor Squad":["Bolt Pistol","Close Combat Weapon"],"Saint Celestine":!0,Sanctifiers:[],"Seraphim Squad":["Close Combat Weapon","Seraphim"],"Sisters Novitiate Squad":["Close Combat Weapon","Sister Novitiate"],"Sororitas Rhino":["Storm Bolter","Armoured Tracks"],"Triumph of Saint Katherine":!0,"Zephyrim Squad":["Power Weapon"]},"Adeptus Custodes":{"Agamatus Custodians":["Interceptor Lance"],Aleya:!0,"Allarus Custodians":["Balistus Grenade Launcher"],"Anathema Psykana Rhino":["Storm Bolter","Armoured Tracks"],"Aquilon Custodians":[],"Ares Gunship":!0,"Blade Champion":!0,"Caladius Grav-tank":["Twin Lastrum Bolt Cannon","Armoured Hull"],"Contemptor-Achillus Dreadnought":["Achillus Dreadspear"],"Contemptor-Galatus Dreadnought":!0,"Coronus Grav-carrier":!0,"Custodian Guard":[],"Custodian Guard with Adrasite and Pyrithite Spears":[],"Custodian Wardens":[],"Knight-Centura":[],"Orion Assault Dropship":!0,"Pallas Grav-attack":!0,Prosecutors:!0,"Sagittarum Custodians":!0,"Shield-Captain":[],"Shield-captain In Allarus Terminator Armour":["Balistus Grenade Launcher"],"Shield-captain on Dawneagle Jetbike":["Interceptor Lance"],"Telemon Heavy Dreadnought":["Spiculus Bolt Launcher","Armoured Feet"],"Trajann Valoris":!0,Valerian:!0,"Venatari Custodians":[],"Venerable Contemptor Dreadnought":["Combi-Bolter","Contemptor Combat Weapon"],"Venerable Land Raider":["Godhammer Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Vertus Praetors":["Interceptor Lance"],Vigilators:!0,Witchseekers:!0},"Adeptus Mechanicus":{"Archaeopter Fusilave":["Cognis Heavy Stubber Array","Armoured Hull"],"Archaeopter Stratoraptor":["Cognis Heavy Stubber","Heavy phosphor blaster","Twin Cognis Lascannon","Armoured Hull"],"Archaeopter Transvector":["Cognis Heavy Stubber Array","Armoured Hull"],"Belisarius Cawl":!0,"Corpuscarii Electro-priests":!0,"Cybernetica Datasmith":!0,"Fulgurite Electro-priests":!0,"Ironstrider Ballistarii":["Ironstrider Feet"],"Kastelan Robots":[],"Kataphron Breachers":[],"Kataphron Destroyers":["Close Combat Weapon"],"Onager Dunecrawler":["Dunecrawler Legs"],"Pteraxii Skystalkers":!0,"Pteraxii Sterylizors":!0,"Serberys Raiders":["Mechanicus Pistol","Galvanic Carbine","Cavalry sabre & clawed limbs"],"Serberys Sulphurhounds":["Mechanicus Pistol","Sulphur Breath","Cavalry Arc Maul","Clawed Limbs"],"Servitor Battleclade":["Heavy Arc Rifle","Heavy Bolter","Mechanicus Pistol","Dataspikes","Servo-claw"],"Sicarian Infiltrators":["Stubcarbine","Power Weapon"],"Sicarian Ruststalkers":[],"Skitarii Marshal":!0,"Skitarii Rangers":["Galvanic Rifle","Close Combat Weapon"],"Skitarii Vanguard":["Radium Carbine","Close Combat Weapon"],"Skorpius Disintegrator":["Cognis Heavy Stubber","Disruptor Missile Launcher","Armoured Hull"],"Skorpius Dunerider":!0,"Sydonian Dragoons with Radium Jezzails":!0,"Sydonian Skatros":["Mechanicus Pistol","Sydonian Feet"],"Tech-Priest Dominus":["Omnissian Axe"],"Tech-Priest Enginseer":!0,"Tech-Priest Manipulus":["Omnissian Staff"],Technoarcheologist:!0,"sydonian Dragoons with Taser Lances":!0},"Adeptus Titanicus":{"Reaver Titan":["Reaver apocalypse launcher","reaver feet"],"Warbringer Nemesis Titan":["Anvillus Defence Battery","Ardex-defensor Mauler","Nemesis Feet"],"Warhound Titan":["Warhound Feet"],"Warlord Titan":["Ardex-defensor Mauler","Ardex-defensor Lascannon","Warlord Feet"]},Aeldari:wr,"Astra Militarum":{"Aegis Defence Line":!0,"Armoured Sentinels":["Close Combat Weapon","armoured sentinel"],"Artillery Team":["Lasgun","Crew Close Combat Weapons"],"Attilan Rough Riders":["Hunting Lance","Steed's hooves"],"Avenger Strike Fighter":!0,Baneblade:["Baneblade Cannon","Coaxial Autocannon","Demolisher Cannon","Armoured Tracks"],Banehammer:["Tremor Cannon","Armoured Tracks"],Banesword:["Quake Cannon","Armoured Tracks"],Basilisk:["Earthshaker Cannon","Armoured Tracks"],"Bullgryn Squad":["Grenadier Gauntlet","Close Combat Weapon","Slabshield"],"Cadian Command Squad":["Medi-pack","Regimental Standard","Master Vox"],"Cadian Heavy Weapons Squad":["Weapons Team Close Combat Weapons","Heavy Weapons Team"],"Cadian Shock Troops":["Lasgun","Laspistol","Close Combat Weapon","Shock Trooper"],"Catachan Command Squad":[],"Catachan Heavy Weapons Squad":["Weapons Team Close Combat Weapons"],"Catachan Jungle Fighters":["Laspistol","Close Combat Weapon","lasgun","Catachan Jungle Fighter"],Chimera:["Armoured Tracks"],"Cyclops Demolition Vehicle":!0,"Death Korps of Krieg":["Laspistol","Chainsword","Lasgun","Close Combat Weapon"],"Death Riders":!0,Deathstrike:["Deathstrike Missile","Armoured Tracks"],Doomhammer:["Magma Cannon","Armoured Tracks"],"Field Ordnance Battery":["Battery Close Combat Weapons"],"Gaunt's Ghosts":!0,Hellhammer:["Coaxial Autocannon","Demolisher Cannon","Hellhammer Cannon","Armoured Tracks"],Hellhound:["Armoured Tracks"],Hydra:["Hydra Autocannon","Armoured Tracks"],Kasrkin:["Hot-Shot Laspistol","Chainsword","Hot-Shot Lasgun","Close Combat Weapon"],"Krieg Combat Engineers":["Autopistol","Trench Club"],"Krieg Command Squad":["Alchemyk Counteragents","Servo-Scribes","Master Vox","Regimental Standard"],"Krieg Heavy Weapons Squad":["Laspistol","Heavy Weapons Gunner","Close Combat Weapon"],"Leman Russ Battle Tank":["Leman Russ Battle Cannon","Armoured Tracks"],"Leman Russ Commander":["Armoured Tracks"],"Leman Russ Demolisher":["Demolisher Battle Cannon","Armoured Tracks"],"Leman Russ Eradicator":["Eradicator Nova Cannon","Armoured Tracks"],"Leman Russ Executioner":["Executioner Plasma Cannon","Armoured Tracks"],"Leman Russ Exterminator":["Exterminator Autocannon","Armoured Tracks"],"Leman Russ Punisher":["Punisher Gatling Cannon","Armoured Tracks"],"Leman Russ Vanquisher":["Vanquisher Battle Cannon","Armoured Tracks"],"Lord Marshal Dreir":!0,"Lord Solar Leontus":!0,Manticore:["Storm Eagle Rockets","Armoured Tracks"],"Militarum Tempestus Command squad":["Hot-Shot Lasgun","Tempestus Dagger"],"Ministorum Priest":[],"Nork Deddog":!0,"Ogryn Bodyguard":[],"Ogryn Squad":!0,"Primaris Psyker":!0,Ratlings:["Sniper Rifle","Close Combat Weapon"],"Rogal Dorn Battle Tank":["Armoured Tracks"],"Rogal Dorn Commander":["Armoured Tracks"],"Scout Sentinels":["Scout Sentinel"],Shadowsword:["Volcano Cannon","Armoured Tracks"],"Sly Marbo":!0,StormSword:["Stormsword Siege Cannon","Armoured Tracks"],Stormlord:["Vulcan Mega-bolter","Armoured Tracks"],Taurox:["Twin Autocannon","Armoured Tracks"],"Taurox Prime":["Armoured Tracks"],"Tech-Priest Enginseer":!0,"Tempestus Aquilons":["Close Combat Weapon"],"Tempestus Scions":["Close Combat Weapon","Chainsword"],"Ursula Creed":!0,Valkyrie:["Armoured Hull"],Wyvern:["Wyvern Quad Stormshard Mortar","Armoured Tracks"]},"Black Templars":{"Black Templars Gladiator Lancer":["Lancer Laser Destroyer","Armoured Hull"],"Black Templars Gladiator Reaper":["Tempest Bolter","Twin Heavy Onslaught Gatling Cannon","Armoured Hull"],"Black Templars Gladiator Valiant":["Twin Las-Talon","Armored Hull"],"Black Templars Impulsor":["Armoured Hull"],"Black Templars Repulsor":["Heavy Onslaught Gatling Cannon","Hunter-Slayer Missile","Repulsor Defensive Array","Armoured Hull"],"Black Templars Repulsor Executioner":["Heavy Onslaught Gatling Cannon","Repulsor Executioner Defensive Array","Twin Heavy Bolter","Twin Icarus Ironhail Heavy Stubber","Armoured Hull"],Castellan:[],"Chaplain Grimaldus":!0,"Crusader Squad":[],"High Marshal Helbrecht":!0,Marshal:["Master-Crafted Power Weapon"],"Primaris Crusader Squad":[],"Primaris Sword Bretheren":[],"The Emperor's Champion":!0},"Blood Angels":{Astorath:!0,"Baal Predator":["Armoured Tracks"],"Blood Angels Captain":[],"Chief Librarian Mephiston":!0,"Commander Dante":!0,"Death Company Captain":[],"Death Company Captain with Jump Pack":[],"Death Company Dreadnought":["Twin Icarus Ironhail Heavy Stubber"],"Death Company Marines":[],"Death Company Marines with Bolt Rifles":[],"Death Company Marines with Jump Packs":[],Lemartes:!0,"Sanguinary Guard":[],"Sanguinary Priest":!0,"The Sanguinor":!0},"Chaos Daemons":{"Be'Lakor":["Betraying Shades","The Blade of Shadows"],"Beasts of Nurgle":["Putrid Appendages"],Bloodcrushers:["Hellblade","Juggernaut's Bladed Horn"],Bloodletters:["Hellblade"],Bloodthirster:["Hellfire Breath"],"Blue Horrors":["Coruscating Blue Flames","Blue Claws","Coruscating Yellow Flames","Yellow Claws"],"Burning Chariot":["Fire of Tzeentch","Flamer Mouths","Screamer Bites"],Changecaster:["Arcane Fireball","Herald Combat Weapon"],"Contorted Epitome":["Coiled Tentacles","Ravaging Claws"],"Daemon Prince of Chaos":["Hellforged Weapons","Infernal Cannon"],"Daemon Prince of Chaos With Wings":["Hellforged Weapons","Infernal Cannon"],Daemonettes:["Slashing Claws"],Epidemius:["Balesword and Nurgling Attendants"],"Exalted Flamer":["Fire of Tzeentch","Flamer Mouths"],Fateskimmer:["Arcane Fireball","Herald Combat Weapon","Screamer Bites"],Fiends:["Barbed Tail and Dissecting Claws"],Flamers:["Flickering Flames","Flamer Mouths"],"Flesh Hounds":["Burning Roar","Gore-drenched Fangs","Collar of Khorne"],Fluxmaster:["Arcane Fireball","Herald Combat Weapon"],"Great Unclean One":["Putrid Vomit"],Hellflayers:["Lashes of Torment","Seeker Tongues","Slashing Claws"],"Horticulous Slimux":["Acidic Maw","Lopping Shears"],"Infernal Enrapturess":["Heartstring Lyre","Ravaging Claws"],"Kairos Fateweaver":["Infernal Gateway","Staff of Tomorrow"],Karanak:["Scalding Roar","Soul-Rending Fangs","Brass Collar of Bloody Vengeance"],"Keeper of Secrets":["Phantasmagoria","Snapping Claws","Witstealer Sword"],"Lord of Change":["Bolt of Change","Staff of Tzeentch"],Nurglings:["Diseased Claws and Teeth"],"Pink Horrors":["Coruscating Blue Flames","Coruscating Yellow Flames","Coruscating Pink Flames","Pink Claws","Blue Claws","Yellow Claws"],"Plague Drones":["Death's Heads","Foul Mouthparts","Plaguesword"],Plaguebearers:["Plaguesword"],Poxbringer:["Foul Balesword"],"Rendmaster on Blood Throne":["Attendants' Hellblades","Blade of Blood"],Rotigus:["Streams of Brackish Filth","Gnarlrod"],Screamers:["Lamprey Bite"],Seekers:["Lashing Tongue","Slashing Claws"],"Shalaxi Helbane":["Lash of Slaanesh","Pavane of Slaanesh","Snapping Claws","Soulpiercer"],Skarbrand:["Bellow of Endless Fury","Slaughter and Carnage"],"Skull Cannon":["Skull Cannon","Attendants' Hellblades","Biting Maw"],Skullmaster:["Blade of Blood","Juggernaut's Bladed Horn"],Skulltaker:["The Slayer Sword"],"Sloppity Bilepiper":["Marotter"],"Soul Grinder":["Harvester Cannon","Iron Claw"],"Spoilpox Scrivener":["Disgusting Sneezes","Plaguesword and Distended Maw"],"Syll'esske":["Cacophonic Choir","Scourging Whip","Axe of Dominion"],"The Blue Scribes":["Sharp Quills"],"The Changeling":["Infernal Flames","The Trickster's Staff"],"The masque of Slaanesh":["Serrated Claws"],Tormentbringer:["Lashes of Torment","Seeker Tongues","Slashing Claws"],Tranceweaver:["Ravaging Claws"]},"Chaos Knights":{"Chaos Acastus Knight Asterius":["Asterius Volkite Culverin","Karacnos mortar Battery","twin conversion beam cannon","Titanic Feet"],"Chaos Acastus Knight Porphyrion":["Twin Magna Lascannon","Titanic Feet"],"Chaos Cerastus Knight Acheron":["Acheron Flame Cannon","Twin Heavy Bolter","Reaper Chainfist"],"Chaos Cerastus Knight Atrapos":["Atrapos Lascutter","Graviton Singularity Cannon"],"Chaos Cerastus Knight Castigator":["Castigator Bolt Cannon","Tempest Warblade"],"Chaos Cerastus Knight Lancer":["Cerastus Shock Lance"],"Chaos Questoris Knight Magaera":["Lightning cannon","Phased Plasma-fusil"],"Chaos Questoris Knight Styrix":["Graviton Crusher","Volkite Chierovile"],"Knight Abominant":["Diabolus Heavy Stubber","Volkite Combustor","Balemace","Electroscourge"],"Knight Desecrator":["Desecrator Laser Destroyer","Diabolus Heavy Stubber"],"Knight Despoiler":["Titanic Feet"],"Knight Rampager":["Diabolus Heavy Stubber","Reaper Chainsword","Warpstrike Claw"],"Knight Ruinator":["Darkflame Lance","Terrorpulse Missiles","Fellbore"],"Knight Tyrant":["Titanic Feet"],"War Dog Brigand":["Avenger Chaincannon","Daemonbreath Spear","Armoured Feet"],"War Dog Executioner":["War Dog Autocannon","Armoured Feet"],"War Dog Huntsman":["Reaper Chaintalon","Daemonbreath Spear"],"War Dog Karnivore":["Reaper Chaintalon","Slaughterclaw"],"War Dog Moirax":["Armoured Feet"],"War Dog Stalker":[]},"Chaos Space Marines":{"Abbadon the Despoiler":!0,"Accursed Cultists":!0,"Chaos Bikers":[],"Chaos Land Raider":["Soulshatter Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Chaos Lord":[],"Chaos Lord in Terminator Armour":[],"Chaos Lord with Jump Pack":[],"Chaos Predator Annihilator":["Predator Twin Lascannon","Armoured Tracks"],"Chaos Predator Destructor":["Predator Autocannon","Armoured Tracks"],"Chaos Rhino":["Armoured Tracks"],"Chaos Spawn":!0,"Chaos Terminator Squad":[],"Chaos Vindicator":["Demolisher Cannon","Armoured Tracks"],Chosen:[],"Cultist Firebrand":!0,"Cultist Mob":["Brutal Assault Weapon"],Cypher:!0,"Dark Apostle":!0,"Dark Commune":!0,Defiler:["Defiler Cannon","Defiler Claws"],"Fabius Bile":!0,"Fellgor Beastmen":["Chainsword","Autopistol"],Forgefiend:[],"Haarken Worldclaimer":!0,Havocs:["Flamer"],Helbrute:[],Heldrake:["Heldrake Claws"],"Heretic Astartes Daemon Prince":!0,"Heretic Astartes Daemon Prince With Wings":!0,"Huron Blackheart":!0,"Khorne Berzerkers":[],"Khorne Lord of Skulls":["Great Cleaver of Khorne"],Legionaries:[],"Lord Discordant on Helstalker":["bladed limbs","impaler chainglaive"],"Master of Executions":!0,"Master of Posession":!0,Maulerfiend:["Maulerfiend Fists"],"Nemesis Claw":[],"Noctilith Crown":!0,"Noise Marines":[],Obliterators:!0,"Plague Marines":[],Possessed:["Hideous Mutations"],Raptors:[],"Rubric Marines":[],Sorcerer:!0,"Sorcerer in Terminator Armour":["Infernal Gaze","Force Weapon"],"Traitor Enforcer":!0,"Traitor Guardsmen Squad":[],"Vashtorr the Arkifane":!0,Venomcrawler:!0,"Warp Talons":!0,Warpsmith:!0},"Dark Angels":{Asmodai:!0,Azrael:!0,Belial:!0,"Deathwing Knights":[],"Deathwing Terminator Squad":["Storm Bolter","Power Weapon"],Ezekiel:!0,"Inner Circle Companions":!0,"Land Speeder Vengeance":["Plasma Storm Battery","Close Combat Weapon"],Lazarus:!0,"Lion El'Jonson":!0,"Nephilim Jetfighter":["Blacksword Missiles","Twin Heavy Bolter","Armoured Hull"],"Ravenwind Darkshroud":["Close Combat Weapon"],"Ravenwing Black Knights":["Bolt Pistol","Black Knight Combat Weapon"],"Ravenwing Command Squad":["Bolt Pistol","Black Knight Combat Weapon","Master-Crafted Power Weapon"],"Ravenwing Dark Talon":!0,Sammael:!0},"Death Guard":{"Beasts of Nurgle":!0,"Biologus Putrifier":!0,"Blightlord Terminators":["Bubotic Blade"],"Chaos Land Raider":["Soulshatter Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Chaos Predator Annihilator":["Predator Twin Lascannon","Armoured Tracks"],"Chaos Predator Destructor":["Predator Autocannon","Armoured Tracks"],"Chaos Rhino":["Armoured Tracks"],"Chaos Spawn":!0,"Daemon Prince of Nurgle":!0,"Daemon Prince of Nurgle With Wings":!0,"Deathshroud Terminators":["Plaguespurt Gauntlet","Manreaper"],Defiler:["Defiler Cannon","Defiler Claws"],"Foetid Bloat Drone":["Plague Probe"],"Foetid Bloat Drone with Heavy Blight Launcher":!0,"Great Unclean One":["Putrid Vomit"],Helbrute:[],"Icon Bearer":!0,"Lord of Contagion":!0,"Lord of Poxes":!0,"Lord of Virulence":!0,"Malignant Plaguecaster":!0,"Miasmic Malignifier":!0,Mortarion:!0,"Myphitic Blight-Haulers":!0,"Noxious Blightbringer":!0,Nurglings:!0,"Plague Drones":["Death's Heads","Foul Mouthparts","Plaguesword"],"Plague Marines":[],"Plague Surgeon":!0,Plaguebearers:["Plaguesword"],"Plagueburst Crawler":["Plagueburst Mortar","Armoured Tracks"],Poxwalkers:!0,Rotigus:!0,Tallyman:!0,Typhus:!0},Deathwatch:kr,Drukhari:Rr,"Emperor's Children":{"Chaos Land Raider":["Soulshatter Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Chaos Rhino":["Armoured Tracks"],"Chaos Spawn":!0,"Chaos Terminators":[],"Daemon Prince of Slaanesh":!0,"Daemon Prince of Slaanesh with Wings":!0,Daemonettes:["Slashing Claws"],Fiends:!0,"Flawless Blades":!0,Fulgrim:!0,Heldrake:["Heldrake Claws"],Infractors:["Duelling Sabre"],"Keeper of Secrets":["Phantasmagoria","Snapping Claws","Witstealer Sword"],"Lord Exultant":[],"Lucius the Eternal":!0,Maulerfiend:["Maulerfiend Fists"],"Noise Marines":[],Seekers:["Lashing Tongue","Slashing Claws"],"Shalaxi Helbane":!0,Sorcerer:!0,Tormentors:[]},"Genestealer Cults":{Aberrants:!0,Abominant:!0,"Achilles Ridgerunners":["Armoured Hull"],"Acolyte Hybrids with Autopistols":[],"Acolyte Hybrids with Hand Flamers":[],"Acolyte Iconward":!0,"Atalan Jackals":["Atalan Small Arms","Close Combat Weapon"],Benefictus:!0,Biophagus:!0,Clamavus:!0,"Goliath Rockgrinder":["Heavy Stubber","Drilldozer blade","Demolition Charge Cache"],"Goliath Truck":!0,"Hybrid Metamorphs":["Autopistol","Leader's Bio-weapons","Metamorph Mutations"],"Jackal Alphus":!0,Kelermorph:!0,Locus:!0,Magus:!0,"Neophyte Hybrids":["Autopistol","Hybrid Firearm","Close Combat Weapon"],Nexos:!0,Patriarch:!0,Primus:!0,"Purestrain Genestealers":!0,"Reductus Saboteur":!0,Sanctus:[]},"Grey Knights":{"Brother-Captain Stern":!0,"Brotherhood Champion":!0,"Brotherhood Chaplain":!0,"Brotherhood Librarian":["Purge Soul","Vortex of Doom"],"Brotherhood Techmarine":["Plasma Cutter","Omnissian Power Axe","Servo-Arms","Forge Bolter","Grav-Pistol","Flamer"],"Brotherhood Terminator Squad":[],"Castellan Crowe":!0,"Grand Master Voldus":!0,"Grand Master in Nemesis Dreadknight":["Fragstorm Grenade Launcher"],"Land Raider":["Godhammer Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Land Raider Crusader":["Hurricane Bolter","Twin Assault Cannon","Armoured Tracks"],"Land Raider Redeemer":["Flamestorm Cannon","Twin Assault Cannon","Armoured Tracks"],Razorback:["Armoured Tracks"],Rhino:["Armoured Tracks"],"Stormhawk Interceptor":["Armoured Hull"],"Stormraven Gunship":["Stormstrike Missile Launcher","Armoured Hull"],"Stormtalon Gunship":["Twin Assault Cannon","Armoured Hull"],"Grey Knights Thunderhawk Gunship":["Lascannon","Twin Heavy Bolter","Armoured Hull"],"Venerable Dreadnought":[],"Interceptor Squad":["Close Combat Weapon"],"Kaldor Draigo":!0,"Land Raider Banisher":["Armoured Tracks"],"Nemesis Dreadknight":[],"Paladin Squad":[],"Purgation Squad":["Close Combat Weapon"],"Purifier squad":["Purifying Flame","Close Combat Weapon"],Servitors:["Servitor's Servo-arm","Servitor's Tools"],"Strike Squad":["Close Combat Weapon"]},"Imperial Fists":{"Darnath Lysander":!0,"Pedro Kantor":!0,"Tor Garadon":!0},"Imperial Knights":{"Acastus Knight Asterius":!0,"Acastus Knight Porphyrion":["Twin Magna Lascannon","Titanic Feet"],"Armiger Helverin":["Armiger Autocannon","Armoured Feet"],"Armiger Moirax":["Armoured Feet"],"Armiger Warglaive":["Reaper Chain-cleaver","Thermal Spear","Armoured Feet"],"Canis Rex":!0,"Cerastus Knight Atrapos":!0,"Cerastus Knight Acheron":!0,"Cerastus Knight Castigator":!0,"Cerastus Knight Lancer":!0,"Knight Castellan":["Plasma Decimator","Twin Meltagun","Volcano Lance","Titanic Feet"],"Knight Crusader":["Avenger Gatling Cannon","Titanic Feet"],"Knight Errant":["Thermal Cannon"],"Knight Gallant":["Thunderstrike Gauntlet","Reaper Chainsword"],"Knight Paladin":["Rapid-Fire Battle Cannon"],"Knight Preceptor":["Las-Impulsor"],"Knight Valiant":["Conflagration Cannon","Thundercoil Harpoon","Twin Meltagun","Titanic Feet"],"Knight Warden":["Avenger Gatling Cannon","Heavy Flamer"],"Questoris Knight Magaera":["Lightning Cannon","Phased Plasma-fusil"],"Questoris Knight Styrix":["Graviton Crusher","Volkite Chierovile"],"Sir Hekhtur":!0},"Iron Hands":{"Iron Father Feirros":!0},"Leagues of Votann":{"Buri Aegnirssen":!0,"Arcanyst Evaluator":!0,Grimnyr:!0,"Memnyr Strategist":!0,"Cthonian Earthshakers":["Autoch-pattern bolt pistol","Plasma picks"],"Ironkin Steeljacks with Heavy Volkanite Disintegrators":["Preymark crest","Autoch-pattern bolter"],"Ironkin Steeljacks with Melee Weapons":["Preymark crest","Autoch-pattern bolter"],"Kapricus Defenders":["Armoured hull","Twin magna-coil autocannon"],"Kapricus Carrier":["Armoured hull","Magna-coil autocannon","Twin magna-coil autocannon"],"Brôkhyr Iron-master":!0,"Einhyr Champion":["Autoch-pattern combi-bolter"],Kâhl:[],"Hearthkyn Warriors":["Weavefield crest","Autoch-pattern bolt pistol","Close combat weapon","Autoch-pattern bolter"],"Brôkhyr Thunderkyn":["Close combat weapon"],"Cthonian Beserks":["Beserk"],"Einhyr Hearthguard":["Exo-armour grenade launcher"],"Hernkyn Yaegirs":["Close combat weapon"],"Hekaton Land Fortress":["Armoured wheels","MATR autocannon"],Sagitaur:["Armoured wheels","Twin bolt cannon"],"Ûthar the Destined":!0,"Hernkyn Pioneers":["Bolt Revolver","Bolt Shotgun","Magna-coil autocannon","Plasma knife"]},Necrons:Er,Orks:Mr,"Raven Guard":{"Kayvaan Shrike":!0,"Aethon Shaan":!0},Salamanders:Ir,"Space Marines":{"Aggressor Squad":["Twin Power Fist"],Ancient:["Bolt Pistol","Bolt Rifle"],"Ancient in Terminator Armour":[],Apothecary:!0,"Apothecary Biologis":!0,"Assault Intercessor Squad":["Heavy Bolt Pistol","Astartes Chainsword"],"Assault Intercessors with Jump Packs":["Heavy Bolt Pistol","Astartes Chainsword"],Astraeus:["Storm Bolter","Twin Macro-Accelerator Cannon","Armoured Hull"],"Ballistus Dreadnought":!0,"Bladeguard Ancient":!0,"Bladeguard Veteran Squad":["Heavy Bolt Pistol","Master-Crafted Power Weapon"],"Brutalis Dreadnought":["Twin Icarus Ironhail Heavy Stubber"],Captain:[],"Captain in Gravis Armour":[],"Captain in Phobos Armour":!0,"Captain in Terminator Armour":[],"Captain with Jump Pack":[],"Centurion Assault Squad":["Siege Drills"],"Centurion Devastator Squad":["Centurion Fists"],Chaplain:!0,"Chaplain in Terminator Armour":["Crozius Arcanum"],"Chaplain on Bike":!0,"Chaplain with Jump pack":["Crozius Arcanum"],"Company Heroes":!0,"Desolation Squad":["Bolt Pistol","Castellan Launcher","Close Combat Weapon"],"Devastator Squad":["Bolt Pistol","Boltgun","Close Combat Weapon"],Dreadnought:[],"Drop Pod":!0,"Eliminator Squad":["Bolt Pistol","Close Combat Weapon"],"Eradicator Squad":["Bolt Pistol","Melta Rifle","Close Combat Weapon"],"Firestrike Servo Turrets":["Close Combat Weapon"],"Gladiator Lancer":["Lancer Laser Destroyer","Armoured Hull"],"Gladiator Reaper":["Tempest Bolter","Twin Heavy Onslaught Gatling Cannon","Armoured Hull"],"Gladiator Valiant":["Twin Las-Talon","Armored Hull"],"Hammerfall Bunker":["Hammerfall Missile Launcher"],"Heavy Intercessor Squad":["Heavy Bolt Rifle"],"Hellblaster Squad":["Bolt Pistol","Plasma Incinerator","Close Combat Weapon"],Impulsor:["Armoured Hull"],"Inceptor Squad":["Close Combat Weapon"],"Incursor Squad":["Bolt Pistol","Occulus Bolt Carbine","Paired Combat Blades"],"Infernus Squad":!0,"Infiltrator Squad":["Bolt Pistol","Marksman Bolt carbine","Close Combat Weapon"],"Intercessor Squad":[],"Invader ATV":["Bolt Pistol","Twin Bolt Rifle","Close Combat Weapon"],"Invictor Tactical Warsuit":["Fragstorm Grenade Launcher","Heavy Bolter","Twin Ironhail Heavy Stubber","Invictor Fist"],Judiciar:!0,"Land Raider":["Godhammer Lascannon","Twin Heavy Bolter","Armoured Tracks"],"Land Raider Crusader":["Hurricane Bolter","Twin Assault Cannon","Armoured Tracks"],"Land Raider Redeemer":["Flamestorm Cannon","Twin Assault Cannon","Armoured Tracks"],Librarian:!0,"Librarian in Phobos Armour":!0,"Librarian in Terminator Armour":["Force Weapon","Smite"],Lieutenant:[],"Lieutenant in Phobos Armour":!0,"Lieutenant in Reiver Armour":!0,"Lieutenant with Combi-weapon":!0,"Outrider Squad":["Bolt Pistol","Twin Bolt Rifle","Close Combat Weapon","Heavy Bolt Pistol","Astartes Chainsword"],"Predator Annihilator":["Predator Twin Lascannon","Armoured Tracks"],"Predator Destructor":["Predator Autocannon","Armoured Tracks"],Razorback:["Armoured Tracks"],"Redemptor Dreadnought":["Redemptor Fist"],"Reiver Squad":["Special Issue Bolt Pistol","Combat Knife","Close Combat Weapon"],Repulsor:["Hunter-Slayer Missile","Repulsor Defensive Array","Armoured Hull"],"Repulsor Executioner":["Heavy Onslaught Gatling Cannon","Repulsor Executioner Defensive Array","Twin Heavy Bolter","Twin Icarus Ironhail Heavy Stubber","Armoured Hull"],Rhino:["Armoured Tracks"],"Scout Squad":["Bolt Pistol","Boltgun","Close Combat Weapon"],"Sternguard Veteran Squad":["Sternguard Bolt Pistol","Sternguard Bolt Rifle","Close Combat Weapon"],"Storm Speeder Hailstrike":!0,"Storm Speeder Hammerstrike":!0,"Storm Speeder Thunderstrike":!0,"Stormhawk Interceptor":["Armoured Hull"],"Stormraven Gunship":["Stormstrike Missile Launcher","Armoured Hull"],"Stormtalon Gunship":["Twin Assault Cannon","Armoured Hull"],"Suppressor Squad":!0,"Tactical Squad":[],Techmarine:!0,"Terminator Assault Squad":[],"Terminator Squad":[],"Thunderhawk Gunship":["Lascannon","Twin Heavy Bolter","Armoured Hull"],"Vanguard Veteran Squad":["Bolt Pistol","Vanguard Veteran Weapon"],"Vanguard Veteran Squad with Jump Packs":["Bolt Pistol","Vanguard Veteran Weapon"],Vindicator:["Demolisher Cannon","Armoured Tracks"],Whirlwind:["Whirlwind Vengeance Launcher","Armoured Tracks"]},"Space Wolves":{"Arjac Rockfist":!0,"Bjorn the Fell-Handed":["Heavy Flamer","Trueclaw"],"Blood Claws":[],"Fenrisian Wolves":!0,"Grey Hunters":[],"Iron Priest":!0,"Logan Grimnar":!0,Murderfang:!0,"Njal Stormcaller":!0,"Ragnar Blackmane":!0,"Thunderwolf Cavalry":["Teeth and Claws","Wolf Guard Weapon"],"Ulrik the Slayer":!0,"Venerable Dreadnought":[],"Wolf Guard Battle Leader":[],"Wolf Guard Headtakers":["Heavy Bolt Pistol"],"Wolf Guard Terminators":["Storm Bolter","Master-Crafted Power Weapon"],"Wolf Priest":!0,Wulfen:["Wulfen Weapons"],"Wulfen Dreadnought":[],"Wulfen with Storm Shields":["Thunder Hammer"]},"T'au Empire":{"AX-1-0 Tiger Shark":["Twin Heavy Rail Cannon","Armoured Hull"],"Breacher Team":["Pulse Blaster","Pulse Pistol","Close Combat Weapon","Support turret"],"Broadside Battlesuits":["Crushing Bulk"],"Cadre Fireblade":["Fireblade Pulse Rifle","Close Combat Weapon"],"Commander in Enforcer Battlesuit":["Battlesuit fists"],"Commander Farsight":!0,"Commander Shadowsun":!0,"Commander in Coldstar Battlesuit":["Battlesuit fists"],"Crisis Fireknife Battlesuits":["Battlesuit Fists","Crisis Fireknife Shas’ui (Shield Drone)","Crisis Fireknife Shas’vre (Shield Drone)"],"Crisis Starscythe Battlesuits":["Battlesuit Fists","Crisis Starscythe Shas’ui (Shield Drone)","Crisis Starscythe Shas’vre (Shield Drone)"],"Crisis Sunforge Battlesuits":["Battlesuit Fists","Crisis Sunforge Shas’ui (Shield Drone)","Crisis Sunforge Shas’vre (Shield Drone)"],Darkstrider:!0,Devilfish:["Accelerator Burst Cannon","Armoured Hull"],Ethereal:["Honour Stave"],"Firesight Team":!0,"Ghostkeel Battlesuit":["Ghostkeel Fists"],"Hammerhead Gunship":["Armoured Hull"],"Kroot Carnivores":["Close Combat Weapon","Kroot Pistol","Kroot Pistol","Kroot Pistol","Kroot Pistol","Kroot Pistol","Kroot Pistol","Kroot Pistol"],"Kroot Farstalkers":["Ritual Blade","Close Combat Weapon","Ripping Fangs"],"Kroot Flesh Shaper":!0,"Kroot Hounds":!0,"Kroot Lone Spear":["Kalamandra's Bite","Close Combat Weapon"],"Kroot Lone-Spear":["Kalamandra's Bite","Close Combat Weapon"],"Kroot Trail Shaper":!0,"Kroot War Shaper":["Kroot Pistol","Shaper's blade"],"Krootox Riders":["Close Combat Weapon","Krootox Fists"],"Krootox rampagers":!0,Manta:!0,"Pathfinder Team":["Pulse Carbine","Pulse Pistol","Close Combat Weapon","Recon droneDrone burst cannon","Drone burst cannon"],Piranha:["Twin Pulse Carbine","Armoured hull"],"Razorshark Strike Fighter":["Accelerator Burst Cannon","Quad Ion Turret","Armoured Hull"],"Riptide Battlesuit":["Riptide Fists"],"Sky Ray Gunship":["Seeker missile Rack","Armoured Hull"],"Stealth Battlesuits":["Battlesuit Fists","Stealth Shas’ui","Battlesuit support system","Homing beacon"],Stormsurge:["Cluster Rocket System","Destroyer Missiles","Thunderous Footfalls"],"Strike Team":["Pulse Rifle","Close Combat Weapon","Support turret"],"Sun Shark Bomber":["Twin Ion Rifle","Armoured Hull"],"Ta'unar Supremacy Armour":["Crushing Feet","Burst Cannon","Smart Missile System"],"Tidewall Droneport":!0,"Tidewall Gunrig":!0,"Tidewall Shieldline":[],"Tiger Shark":["Armoured Hull"],"Vespid Stingwings":["Stingwing Claws"]},"Thousand Sons":{Ahriman:!0,"Blue Horrors":!0,"Chaos Land Raider":["Soulshatter Lascannon"],"Chaos Predator Annihilator":["Predator Twin Lascannon","Armoured Tracks"],"Chaos Predator Destructor":["Predator Autocannon","Armoured Tracks"],"Chaos Rhino":["Armoured Tracks"],"Chaos Spawn":!0,"Chaos Vindicator":["Demolisher Cannon","Armoured Tracks"],"Daemon Prince of Tzeentch":!0,"Daemon Prince of Tzeentch with Wings":!0,Defiler:["Defiler Cannon","Defiler Claws"],"Exalted Sorcerer":["Inferno Bolt Pistol","Astral Blast","Force Weapon"],"Exalted Sorcerer on Disc of Tzeentch":["Arcane Fire","Inferno Bolt Pistol","Force Weapon"],Flamers:!0,Forgefiend:[],Helbrute:[],Heldrake:["Heldrake Claws"],"Infernal Master":!0,"Kairos Fateweaver":!0,"Lord of Change":["Bolt of Change","Staff of Tzeentch"],"Magnus the Red":!0,Maulerfiend:["Maulerfiend Fists"],"Mutalith Vortex Beast":!0,"Pink Horrors":["Coruscating Pink Flames","Coruscating Blue Flames","Coruscating Yellow Flames","Pink Claws","Blue Claws","Yellow Claws"],"Rubric Marines":["Malefic Curse"],"Scarab Occult Terminators":["Malefic Curse","Force Weapon"],Screamers:!0,"Sekhetar Robots":["Heavy Warpflamer","Hellfyre Missile Rack","Close Combat Weapon"],Sorcerer:["Pandaemonic Delusion","Inferno Bolt Pistol","Force Weapon"],"Sorcerer in Terminator Armour":["Gaze of Hate"],"Tzaangor Enlightened":[],"Tzaangor Enlightened with Fatecaster Greatbows":!0,"Tzaangor Shaman":!0,Tzaangors:[]},Tyranids:xr,Ultramarines:vr,"White Scars":{"Kor'sarro Khan":!0},"Agents of the Imperium":{"Callidus Assassin":!0,"Corvus Blackstar":["Twin Assault Cannon","Armoured Hull"],"Culexus Assassin":!0,"Deathwatch Kill Team":[],"Eversor Assassin":!0,"Exaction Squad":["Arbites Shotpistol","Close Combat Weapon","Mechanical Bite","Nuncio-Aquila"],"Grey Knights Terminator Squad":["Nemesis Force Weapon"],"Imperial Navy Breachers":["Close Combat Weapon","Endurant Shield"],"Imperial Rhino":["Storm Bolter","Armoured Tracks"],Inquisitor:["Blessed Wardings"],"Inquisitor Coteaz":!0,"Inquisitor Draxus":!0,"Inquisitor Greyfax":!0,"Inquisitorial Agents":["Agent Firearm","Agent Melee Weapon"],"Inquisitorial Chimera":["Armoured Tracks"],"Ministorum Priest":[],Navigator:!0,"Rogue Trader Entourage":!0,Sanctifiers:[],"Sisters of Battle Immolator":["Heavy Bolter","Armoured Tracks"],"Sisters of Battle Squad":["Bolt Pistol","Close Combat Weapon"],"Subductor Squad":["Arbites Shotpistol","Shock maul","Mechanical Bite","Nuncio Aquila"],"Vigilant Squad":["Arbites Shotpistol","Close Combat Weapon","Mechanical Bite","Nuncio-Aquila"],"Vindicare Assassin":!0,"Voidsmen-at-Arms":!0,"Watch Captain Artemis":!0,"Watch Master":!0}};function te(t,e){const[a,c]=Wt(()=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return e}});return Lt(()=>{try{localStorage.setItem(t,JSON.stringify(a))}catch(n){}},[t,a]),[a,c]}function Be({id:t,active:e,label:a,onClick:c}){return I("button",{class:`tab ${e?"active":""}`,onClick:c,children:a})}function Dr(){const[t,e]=te("tab","input"),[a,c]=te("text",""),[n,h]=te("hide",!1),[f,o]=te("combine",!1),[l,s]=te("multiline",!1),[u,r]=te("colorMode","faction"),[i,m]=te("colors",{unit:"#ffffff",subunit:"#808080",wargear:"#ffffff",points:"#ffff00",header:"#ffff00"}),[p,C]=te("format","discordCompact"),d=ce(()=>{if(!a.trim())return null;const T=a.split(/\r?\n/),R=Cr(T),E={GW_APP:cr,WTC_COMPACT:ir,WTC:ur,NR_GW:mr,NRNR:hr,LF:yr}[R];if(!E)return null;try{return E(T)}catch(v){return null}},[a]),S=ce(()=>d?Ar(d):null,[d]),A=ce(()=>!d||!S?"":At(d,!1,S,!1,oe,!1,!1).plainText,[d,S]);ce(()=>!d||!S?"":At(d,!0,S,n,oe,!0,f).plainText,[d,S,n,f]);const[b,g]=Wt(""),y=ce(()=>{var R;const T=(R=Te!=null?Te:xe.AnsiUp)!=null?R:ht;try{return new T}catch(E){return new ht}},[]);Lt(()=>{if(!d||!S){g("");return}let T="";switch(p){case"discordCompact":T=pe(d,!1,!0,S,n,oe,f);break;case"discordExtended":T=pe(d,!1,!1,S,n,oe,f);break;case"plainText":T=pe(d,!0,!0,S,n,oe,f);break;case"plainTextExtended":T=pe(d,!0,!1,S,n,oe,f);break;default:T=pe(d,!1,!0,S,n,oe,f)}g(T)},[d,S,n,f,u,i,l,p]);const _=ce(()=>y.ansi_to_html(b),[b,y]);function w(T){var R;T&&((R=navigator.clipboard)==null||R.writeText(T))}return I("div",{class:"container",children:[I("header",{children:I("div",{class:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[I("strong",{children:"40k Compactor"}),I("span",{class:"pill",children:"Mobile"})]})}),I("div",{class:"screen",children:[t==="input"&&I("div",{class:"section",children:[I("textarea",{placeholder:"Paste your list here",value:a,onInput:T=>c(T.currentTarget.value)}),I("div",{class:"row",style:{marginTop:"6px",justifyContent:"space-between"},children:[I("span",{class:"pill",children:[a.length," chars"]}),I("button",{class:"btn",onClick:()=>c(""),children:"Clear"})]})]}),t==="compact"&&I("div",{class:"section",children:[I("div",{class:"row",style:{marginBottom:"6px",justifyContent:"space-between"},children:I("label",{children:["Output:",I("select",{value:p,onChange:T=>C(T.target.value),style:{marginLeft:"6px"},children:[I("option",{value:"discordCompact",children:"Discord (Compact)"}),I("option",{value:"discordExtended",children:"Discord (Extended)"}),I("option",{value:"plainText",children:"Plain Text"}),I("option",{value:"plainTextExtended",children:"Plain Text (extended)"})]})]})}),I("div",{class:"row",style:{marginBottom:"6px",justifyContent:"space-between"},children:[I("label",{children:[I("input",{type:"checkbox",checked:n,onChange:T=>h(T.target.checked)})," Hide Subunits"]}),I("label",{children:[I("input",{type:"checkbox",checked:f,onChange:T=>o(T.target.checked)})," Combine like units"]}),I("label",{children:[I("input",{id:"multilineHeaderCheckbox",type:"checkbox",checked:l,onChange:T=>s(T.target.checked)})," Multiline Header"]})]}),I("div",{class:"row",style:{gap:"10px",alignItems:"center",marginBottom:"6px"},children:[I("label",{children:[I("input",{type:"radio",name:"colorMode",value:"none",checked:u==="none",onChange:()=>r("none")}),I("span",{style:{marginLeft:"6px"},children:"No color"})]}),I("label",{children:[I("input",{type:"radio",name:"colorMode",value:"custom",checked:u==="custom",onChange:()=>r("custom")}),I("span",{style:{marginLeft:"6px"},children:"Custom"})]}),I("label",{children:[I("input",{type:"radio",name:"colorMode",value:"faction",checked:u==="faction",onChange:()=>r("faction")}),I("span",{style:{marginLeft:"6px"},children:"Faction Color"})]})]}),u==="custom"&&I("div",{class:"grid2 section",children:["unit","subunit","wargear","points","header"].map(T=>I("label",{children:[T," color",I("input",{id:`${T}Color`,type:"color",value:i[T],onChange:R=>m(De(ue({},i),{[T]:R.target.value})),style:{marginLeft:"6px"}})]}))}),I("div",{class:"outbox",id:"markdownPreviewOutput",dangerouslySetInnerHTML:{__html:_}}),I("div",{class:"row",style:{marginTop:"6px",justifyContent:"flex-end"},children:I("button",{class:"btn",onClick:()=>w(b),children:"Copy"})})]}),t==="full"&&I("div",{class:"section",children:[I("div",{class:"outbox",children:A}),I("div",{class:"row",style:{marginTop:"6px",justifyContent:"flex-end"},children:I("button",{class:"btn",onClick:()=>w(A),children:"Copy"})})]})]}),I("nav",{class:"tabs",children:[I(Be,{id:"input",active:t==="input",label:"Input",onClick:()=>e("input")}),I(Be,{id:"compact",active:t==="compact",label:"Compact",onClick:()=>e("compact")}),I(Be,{id:"full",active:t==="full",label:"Full",onClick:()=>e("full")})]})]})}er(I(Dr,{}),document.getElementById("app"));
